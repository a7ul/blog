<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.625 -apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}h1{margin-left:0;margin-right:0;margin-top:2.4375rem;padding-bottom:calc(0.40625rem - 1px);padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.21875rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;border-bottom:1px solid hsla(0,0%,0%,0.07);}h2{margin-left:0;margin-right:0;margin-top:1.625rem;padding-bottom:calc(0.40625rem - 1px);padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.40625rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;border-bottom:1px solid hsla(0,0%,0%,0.07);}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:hsla(0,0%,0%,0.53);font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}ul{margin-left:1.625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;font-size:0.85rem;line-height:1.625rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;font-size:1rem;line-height:1.625rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}blockquote{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:calc(0.8125rem - 1px);padding-right:0;padding-top:0;margin-bottom:0.8125rem;border-left:4px solid hsla(0,0%,0%,0.13);color:hsla(0,0%,0%,0.53);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(0.8125rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}b{font-weight:600;}strong{font-weight:600;}dt{font-weight:600;}th{font-weight:600;}li{margin-bottom:calc(0.8125rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.625rem;margin-bottom:calc(0.8125rem / 2);margin-top:calc(0.8125rem / 2);}li > ul{margin-left:1.625rem;margin-bottom:calc(0.8125rem / 2);margin-top:calc(0.8125rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(0.8125rem / 2);}code{font-size:0.85rem;line-height:1.625rem;}kbd{font-size:0.85rem;line-height:1.625rem;}samp{font-size:0.85rem;line-height:1.625rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.08333rem;padding-right:1.08333rem;padding-top:0.8125rem;padding-bottom:calc(0.8125rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}h3,h4,h5,h6{margin-bottom:0.8125rem;margin-top:1.625rem;}ol,ul{margin-left:2.03125rem;}li>ol,li>ul{margin-left:2.03125rem;}a{color:#4078c0;text-decoration:none;}a:hover,a:active{text-decoration:underline;}a.gatsby-resp-image-link{box-shadow:none;}</style><style data-href="/styles.ef33c0516981360d284e.css" data-identity="gatsby-global-css">.notfound-container{align-items:center;display:flex;flex-direction:column;justify-content:center}.notfound-video-frame{border-radius:15px}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-8d7d79679b70dbe27172b6460e7a7910.woff2) format("woff2"),url(/static/montserrat-latin-100-ec38980a9e0119a379e2a9b3dbb1901a.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-e279051046ba1286706adc886cf1c96b.woff2) format("woff2"),url(/static/montserrat-latin-100italic-3b325a3173c8207435cd1b76e19bf501.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-9d266fbbfa6cab7009bd56003b1eeb67.woff2) format("woff2"),url(/static/montserrat-latin-200-2d8ba08717110d27122e54c34b8a5798.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-6e5b3756583bb2263eb062eae992735e.woff2) format("woff2"),url(/static/montserrat-latin-200italic-a0d6f343e4b536c582926255367a57da.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-00b3e893aab5a8fd632d6342eb72551a.woff2) format("woff2"),url(/static/montserrat-latin-300-ea303695ceab35f17e7d062f30e0173b.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-56f34ea368f6aedf89583d444bbcb227.woff2) format("woff2"),url(/static/montserrat-latin-300italic-54b0bf2c8c4c12ffafd803be2466a790.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-b71748ae4f80ec8c014def4c5fa8688b.woff2) format("woff2"),url(/static/montserrat-latin-400-0659a9f4e90db5cf51b50d005bff1e41.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-6eed6b4cbb809c6efc7aa7ddad6dbe3e.woff2) format("woff2"),url(/static/montserrat-latin-400italic-7583622cfde30ae49086d18447ab28e7.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-091b209546e16313fd4f4fc36090c757.woff2) format("woff2"),url(/static/montserrat-latin-500-edd311588712a96bbf435fad264fff62.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-c90ced68b46050061d1a41842d6dfb43.woff2) format("woff2"),url(/static/montserrat-latin-500italic-5146cbfe02b1deea5dffea27a5f2f998.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-0480d2f8a71f38db8633b84d8722e0c2.woff2) format("woff2"),url(/static/montserrat-latin-600-b77863a375260a05dd13f86a1cee598f.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-cf46ffb11f3a60d7df0567f8851a1d00.woff2) format("woff2"),url(/static/montserrat-latin-600italic-c4fcfeeb057724724097167e57bd7801.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-7dbcc8a5ea2289d83f657c25b4be6193.woff2) format("woff2"),url(/static/montserrat-latin-700-99271a835e1cae8c76ef8bba99a8cc4e.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-c41ad6bdb4bd504a843d546d0a47958d.woff2) format("woff2"),url(/static/montserrat-latin-700italic-6779372f04095051c62ed36bc1dcc142.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-db9a3e0ba7eaea32e5f55328ace6cf23.woff2) format("woff2"),url(/static/montserrat-latin-800-4e3c615967a2360f5db87d2f0fd2456f.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-bf45bfa14805969eda318973947bc42b.woff2) format("woff2"),url(/static/montserrat-latin-800italic-fe82abb0bcede51bf724254878e0c374.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-e66c7edc609e24bacbb705175669d814.woff2) format("woff2"),url(/static/montserrat-latin-900-8211f418baeb8ec880b80ba3c682f957.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-4454c775e48152c1a72510ceed3603e2.woff2) format("woff2"),url(/static/montserrat-latin-900italic-efcaa0f6a82ee0640b83a0916e6e8d68.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-fc117160c69a8ea0851b26dd14748ee4.woff2) format("woff2"),url(/static/merriweather-latin-300-58b18067ebbd21fda77b67e73c241d3b.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-fe29961474f8dbf77c0aa7b9a629e4bc.woff2) format("woff2"),url(/static/merriweather-latin-300italic-23c3f1f88683618a4fb8d265d33d383a.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-d9479e8023bef9cbd9bf8d6eabd6bf36.woff2) format("woff2"),url(/static/merriweather-latin-400-040426f99ff6e00b86506452e0d1f10b.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-2de7bfeaf08fb03d4315d49947f062f7.woff2) format("woff2"),url(/static/merriweather-latin-400italic-79db67aca65f5285964ab332bd65f451.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-4b08e01d805fa35d7bf777f1b24314ae.woff2) format("woff2"),url(/static/merriweather-latin-700-22fb8afba4ab1f093b6ef9e28a9b6e92.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-cd92541b177652fffb6e3b952f1c33f1.woff2) format("woff2"),url(/static/merriweather-latin-700italic-f87f3d87cea0dd0979bfc8ac9ea90243.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-f813fc6a4bee46eda5224ac7ebf1b7be.woff2) format("woff2"),url(/static/merriweather-latin-900-5d4e42cb44410674acd99153d57df032.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-b7901d85486871c1779c0e93ddd85656.woff2) format("woff2"),url(/static/merriweather-latin-900italic-9647f9fdab98756989a8a5550eb205c3.woff) format("woff")}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#f8f8f2;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;text-align:left;text-shadow:0 1px rgba(0,0,0,.3);white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{border-radius:.3em;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#8292a2}.token.punctuation{color:#f8f8f2}.token.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.resp-sharing-button__icon{display:inline-block}.resp-sharing-button__link{color:#fff;display:inline-block;margin:.5em;text-decoration:none}.resp-sharing-button{border-radius:5px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;padding:.5em .75em;transition:25ms ease-out}.resp-sharing-button__icon svg{height:1em;margin-right:.4em;vertical-align:top;width:1em}.resp-sharing-button--small svg{margin:0;vertical-align:middle}.resp-sharing-button__icon{stroke:#fff;fill:none}.resp-sharing-button__icon--solid,.resp-sharing-button__icon--solidcircle{fill:#fff;stroke:none}.resp-sharing-button--twitter:hover{background-color:#2795e9}.resp-sharing-button--hackernews{background-color:#f60}.resp-sharing-button--hackernews:focus,.resp-sharing-button--hackernews:hover{background-color:#ce5206}.resp-sharing-button--facebook{background-color:#3b5998;border-color:#3b5998}.resp-sharing-button--facebook:active,.resp-sharing-button--facebook:hover{background-color:#2d4373;border-color:#2d4373}.resp-sharing-button--twitter{background-color:#55acee;border-color:#55acee}.resp-sharing-button--twitter:active,.resp-sharing-button--twitter:hover{background-color:#2795e9;border-color:#2795e9}.resp-sharing-button--whatsapp{background-color:#25d366;border-color:#25d366}.resp-sharing-button--whatsapp:active,.resp-sharing-button--whatsapp:hover{background-color:#1da851;border-color:#1da851}.toc-container{border-radius:5px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;margin:0 auto 20px;padding:.5em .75em;transition:25ms ease-out}.toc-header{margin-top:0}.page-spacing{margin:0 auto;max-width:56.875rem;min-width:0}body{font-family:Helvetica,Arial,sans-serif}.main-area{display:flex;flex-direction:row;justify-content:center}.left-side-area,.right-side-area{margin-top:0;padding-top:0}.left-side-area .side-area-wrapper,.right-side-area .side-area-wrapper{max-width:200px;min-width:200px;position:sticky;top:20px}@media (max-width:1024px){.left-side-area,.right-side-area{display:none}}.coffee{margin-bottom:15px;margin-top:10px;transition:50ms;width:40px}.coffee:hover{-webkit-transform:translateY(-5px);transform:translateY(-5px)}input#subscribe-button{background-color:#5149f3;border:0;border-radius:5px;color:#fff;cursor:pointer;font-size:.9rem;margin-left:5px;padding-left:10px;padding-right:10px}input#subscribe-button:hover{background-color:#2b2681}input#subscribe-button:disabled{background-color:#ccc}</style><meta name="generator" content="Gatsby 3.10.1"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><title data-react-helmet="true">🤖 Beginners guide to writing NodeJS Addons using C++ and N-API (node-addon-api) | Blog</title><meta data-react-helmet="true" name="description" content="According to nodejs.org: Node.js Addons are dynamically-linked shared objects, written in C++, that can be loaded into Node.js using the require() function, and used just as if they were an ordinary Node.js module. They are used primarily to provide…"/><meta data-react-helmet="true" name="image" content=""/><meta data-react-helmet="true" name="keywords" content="nodejs, native, addon, n-api, napi, javascript, c++"/><meta data-react-helmet="true" property="og:url" content="https://blog.atulr.com/node-addon-guide"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="🤖 Beginners guide to writing NodeJS Addons using C++ and N-API (node-addon-api)"/><meta data-react-helmet="true" property="og:description" content="According to nodejs.org: Node.js Addons are dynamically-linked shared objects, written in C++, that can be loaded into Node.js using the require() function, and used just as if they were an ordinary Node.js module. They are used primarily to provide…"/><meta data-react-helmet="true" property="og:image" content=""/><meta data-react-helmet="true" property="fb:app_id" content=""/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content="@a7ulr"/><meta data-react-helmet="true" name="twitter:title" content="🤖 Beginners guide to writing NodeJS Addons using C++ and N-API (node-addon-api)"/><meta data-react-helmet="true" name="twitter:description" content="According to nodejs.org: Node.js Addons are dynamically-linked shared objects, written in C++, that can be loaded into Node.js using the require() function, and used just as if they were an ordinary Node.js module. They are used primarily to provide…"/><meta data-react-helmet="true" name="twitter:image" content=""/><link rel="alternate" type="application/rss+xml" title="Atul&#x27;s RSS Feed" href="/rss.xml"/><link as="script" rel="preload" href="/webpack-runtime-0388364b030d207dc5cf.js"/><link as="script" rel="preload" href="/framework-d28b9578a91159581937.js"/><link as="script" rel="preload" href="/app-92a7b3feff722d6b21c6.js"/><link as="script" rel="preload" href="/a11e6048128043ecce21cf58c6d16eea726089af-270590b51b40f21e7c38.js"/><link as="script" rel="preload" href="/component---src-pages-markdown-remark-frontmatter-slug-tsx-7b6dee07d0714d7fe9f5.js"/><link as="fetch" rel="preload" href="/page-data/node-addon-guide/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div style="padding:2.4375rem 1.625rem;padding-top:3px"><header class="page-spacing" style="display:flex;flex-direction:row;justify-content:space-between"><div style="display:inline-block"><a style="padding:0;box-shadow:none" href="/"><img style="display:inline-block;width:4.0625rem;margin:0" src="data:image/png;base64,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" alt="atulr.com/blog"/></a></div><div style="display:inline-block;right:0;padding-top:1.625rem"><a style="padding:0 5px;box-shadow:none" target="_blank" rel="noopener noreferrer" href="https://www.atulr.com"><img style="display:inline-block;width:1.625rem;margin:0" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAABDlBMVEVHcExEQj1DQz9EREFBQD1EQz9CPztCQj5ERUNEREBEREBsbXBtbXBGRkNtbXBtbnFtbXBrbG9naGprbG4zEwptbXBsbXBsbW9sbXBlaW0+eLFtbXBsbXBqa24+eLJtbnE+ebNsbXBfbX5sbW9sbG9nZ2k+eLI+da5maW0+eLJsbXBtbXA+eLNtbXBrbG9tbnBtbXBsbXA+d69sbW9sbXBrbG8+c6w+eLFsbXA+d7A+d7A+eLFsbXA+ebM+eLI+dq1tbXBtbnE+ebQ+d7FrbG8+ebRrbG8+cKE+eLM+eLE+d68+dKk+dq4+c6g+dao+cqY+eLI+ebM+eLNtbnFsbXBtbXA+eLI+ebQ+eLE+ebMczmQsAAAAU3RSTlMABQYJAwgEAQIHChL5C9n73CQqJwLt/WVvDIzjnDKd8fWrCY55F98THW626ZbEOdGwWXZO9UMG6KRiDaiD2M5Cy77kWV7rlh3K+YE6SiYsMK/8wJmjlHcAAAuySURBVFjDlVkJUyJJE80+q5tTHBBQUAQQVgYVr1FHHa9RnXtWUef//5EvX2Z1A+4XG7EdFbtY1Z2V53tZNUQmIorMdPDfMpX+SGaj6VQ6Zr6wa2TcyMQ+uSG5DjkOhTEP48c8GxEv+JQ8ZfJlIYqTL/h1x6XQ5QWKYsOzxse+GZ9ileeSE4i8IDIef0NEva1xrXvard0c9CCV5QU+BSF5PByKXWgQecZk+AtRggzksbCYHI9Cj6LAmIB3IcqWbjaHlf39YnGpWMztr1Uua806lUUej1g08D3y8xTlWU6EWYJZvBQH5LJyAXYjXorrzc72I54njMmT/VFo7NUhT40NRJ4qwRaxymyyyHNd2Y1fyJiIlRvcXPD3k8lU0uMk+VGovTNlchOLfA8WGXWEy5FJ5MW6oYli6nW35eOJFTNJVdSZQqdE+kUsXwRR5PnWC4RosWvjGC/4AcunWqFolVGToehkRkUeK6cSWdVAVKQgMTlEZHU3LOV7O1YZK6A4vNhc3xyt5Gbk8VqhhEggGAHyBXnCjhWT3VjlIVnI3dtOv8kN8WsUaRp2ZGo/VXytmtd4cLI4Rv3Gogj5Jy40PMh01lI11veO+H9LHfZtFAb+uMizw9rtfqJ+7sjlLA6QmCYW/7HruKAcTWaUAXnrS4m8y1KG9vnX/gF5MIuaK1jYcwbrqTsKWcpzvkSk8pBLPhni6HO+cCpR78gqt7S9Rw5t4Y+FnkvIsbi+ieCcUkhboyW766hEyBcoF8PeECYnCRqRl8hb67YpJrpFZDfLHCspxM6E11aIDYmrK9aQy4Gf5IumnoHJkMf60XqSuVuyS36EP7pk04K2xL0l8fzipX131Ea+uGkqJybzN27H+m+zJ0ARlirI5wF5hpBjIVWwfEpIV2o3bK4fGc4XlwLNY1Zf6jdjKL9n47tZt1Uz5sybDCmQ2s6EREcIxgpRlGGtqauFs9QV1BF04bolMpLPUZy1+bcZ2hqFC6GQb8sgpgMEd21AGYJFcQfyHp8qByHsRZ5kgAwRK8PVSOupfrF6I3+J75tky55zosQqP+aqBI/zF3FjIuU4qqN0JZUjMZn/k6GqjUfPok4YLC7w25UseYLAeZZav+AtONEF/Njp0bqmY81YJQxnJZvMaEvZgiztb0mI8tB+Dz7aaWs8NJIN7LpTz8OLqN/eggBHrl0WoEVthxQZlHBX8GXSlcJWoO3C56f50JYBkqWGXbdLUr9BaAJnnBMsOiLDfoMjYDLkDRT/tuvKUgDa9g4cVJ3lj3JTkKtJwh+SS5vyXW6LAC1ShaAdiseapnuATQ4xhzFTRzFUDix/KORnAWH745Q/YrO4j/J5bDjCAuxCNjkymfpIcmoUZ6dPSQq5mZ19BhdSOzMzTkMhvIQo8YDJxqOmxb9ccTq0/u2fyVPELkszU8XcI3gnN84ocPsk0er8C3/McsvcUGKwa7euBMrXBiO7/a/8ka7N058IS6hipZ6PwPWxRKWU8scbzea4ZUa4VW5mbdJEriPDUMtjEbBWkGdBRmGhiMlh+rddBF48rsy8uFAQIH86JRCBq0S/Ltseld69W0zGOwG/XHWAP5PZ0uLWNtSvlvAbg9dKWrQrJOnqCqMNJcRVKntUDsi4RDEN8Npak/GY848XuDwpQ+1LbF0jKR8mdJ/fVa55Ynm+En1Yr0gZN0lo0WgPwJn0BKiysORr/TqbSIFbEv5wBXW87EhUbPIuPMtRpqYga6Ud6gvCH+UDbFLJy5eBkhgv0DqCsWPx3vFQb7QjgbkhALcQ/d4+ZoYkQKv8EQvWPA1nOooM0oJBGxVFgvfauhi/ISZ3pVdCR0nVHOJekN4w5Y+qbmI7MrGXK9+/hckLpPwh9ZuhUymqDgmXwuRaEfl8SRwPL+WPGgI1VP7IJE2oR50lNnnF8gfAIG/oVDKsQdJwweSu7HBJ0tMm/FFDzg4FeGz/IqjTWXrEPqp1Xnzhd4tI9EZK9Kwh6nfEzven/FFDfgyFMo3tX3ihfIt6WyGj/CGNJoMzCocFapQN+xAmb4MvU/5gH1qTlT9s/6ckULD8QRgRdYrYvCMmh2C9JMoRTfmD9iRtIpPyhys+PwJzjkj4w+RFarnxqB1GKD0SocWAUyuxYHDCH9IoVXrhlD/AbGYHiu+Q8AcaTfYt7QjijQlUZAxFfr0C3FhbNDP84S9i2zVgSMIfKDZvk1046ZDljzw8VB8Bfx63iBwmKpisPQvXspnyhz941N5wyh8g8yw+fqxSYFMGZxyuZX73KW/POES+dl1LnfYsffTQDueq9TlOyTaFvg/m5sYC8sPkjAM8tF3DPH9o45mb449cUeihmFKPTAvCd0jPOCB6Wvxv/DFdmNijEY+t0MgZBybH9e3/xB9v2ELWuAfyte8j8Mrtf+KPt+9OlPW8lOgjBj9ZHBZm+GMB8nIrhTn+AC7Ja+mzor4ehyjPSIiey7S9bXu5Gf7YAoZUbpRLLH8oFHdnpnqCuI+FxRgVDxbQ42112tsk/CGOzY3lKJjwxzshmoM8UVAm1+fKLVXEI0eBHGU40WEyp+1Aj8YX+Sl/xOhanmpePOUPOtjhp7FogGU863pUW8dzdAD4ldMMEhHH8NMlBGypRil/uIw3l7WS3kMIcJfj5PbB1TsAHul9hN4pxHKiB770FkT1SjPlD3MwrNZJCjT2jOtFoXd4iBJmd3BI4yjwIjfju3nf4REQKVQJ0XPxAlAR6YtsYCx/DN6Z8PB69fxswz5X998pcunb6vnVhw86+PnM4/OH8/efCCERovfEISN7BJXzrwbM+Xn2+vzy/Pry5/Xl5fWl9YOMf3f+/OeFZzFe0zWeevl1FwE05UQPsmQ0EJEdxhc9TPvHL8+JPB6/r8mEXz/rFqmwP1ORZz98Yb3QngnG+9oeNuqu8Addt15nv/x1Qu73s1Q5XXh+/fMHwkTrsz7CRcBTBxzbsDW1o3h6d64fP4u9L6+7lD98r1+q4vzfP3bNilyVqyOkhXAEXdgavei5FIfH8tnZ9V2/z2PQP8xQX+RfHWcP6/XDdv3wMO9HjAeeOfnyGRu17vR4qwcT33c2LYBUqj23/Qsf/4KX2YxQku8Yxm785JkQo+xIq+bgWuxri9cedgnH2+T+ijNlJ8GkMfU/8J6fP7ly/sgIf9Ay1FgNk3wWxkY+o9X4grWPpCf65P7KZDcVsp5unH6L3cTaRFP+oPf8ze9lck5W7+/v//5Kckcmw6NreOgjouzO3F85foNP4QyYVaf/wJHd+GHPH4Fc/a3C5GUKTs55rfVJhPmklw7H8NBHMXnu/opqQwDhDfUf+IWNn15y/kBzuspmsYZ0cs7xbX0KouRGhEHqGIEXk9/eX21xlzoZh/2HxGQ5f+Csl5gcnpxzvrCGpK0QGLZ8jXT9SIaM++b+KmzfVKzJLxs/SBpNqMgVZU2OYTIE5n3Sy0yOw/WrNTn6x/1VbJwjMfnldeMHgiHnDxxvV18eHlpq8gubrPGI5ZqGpib/4/7KlcTrt9isK0RSzh/A0/Knv/j5Sv7JGdcbTFb/4TKO6yAxOTZv76+ktk/OUFPHQB0vuegxkn6O873FlfbhK/JPmyg2+R4mvxeTzZv7K0l0c7iKMv39VSuBN9Z6CVEW99jrvs+5jrUyZn8BQVrfsCfwdO7+Ss8f8Tet/I+7bObuzPjrS0vwb5mB6tvu7u4XHl+uBJE2eDMQvfHm76/0/HHyMYGlFHUSCMQCYxX1zxLgUcT8Bjsi6clm76/s+cP5vvE6D87PMxDNITF0Pb/RF7Ineun/Zu6v9Pxh6Md9ouK8MB5X8Nb3qTweD7tyrya9jb31cObOH8ajw90Prd//5I+Hz6t3HIzvVyLp928eD62/GdU4K8F60j87M/dXev7gRHLp8Hp5VZ/36bN83MfNbeb4/XL6HN+B4O3Vvf47QHq1G2Hgnw+wENL/e/RfIuYe37elxj8jO5ihjW/INyY0FBo0Kb7cSUTpWpiM5HW7oN+JnP8B8q8o6uA0ipkAAAAASUVORK5CYII=" alt="atulr.com"/></a><a style="padding:0 5px;box-shadow:none" target="_blank" rel="noopener noreferrer" href="https://twitter.com/a7ulr"><img style="display:inline-block;width:1.625rem;margin:0" src="data:image/svg+xml;base64,PHN2ZyBhcmlhLWxhYmVsbGVkYnk9InNpbXBsZWljb25zLXR3aXR0ZXItaWNvbiIgcm9sZT0iaW1nIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHRpdGxlIGlkPSJzaW1wbGVpY29ucy10d2l0dGVyLWljb24iPlR3aXR0ZXIgaWNvbjwvdGl0bGU+PHBhdGggZmlsbD0iIzE5QjVGRSIgZD0iTTIzLjk1NCA0LjU2OWMtLjg4NS4zODktMS44My42NTQtMi44MjUuNzc1IDEuMDE0LS42MTEgMS43OTQtMS41NzQgMi4xNjMtMi43MjMtLjk1MS41NTUtMi4wMDUuOTU5LTMuMTI3IDEuMTg0LS44OTYtLjk1OS0yLjE3My0xLjU1OS0zLjU5MS0xLjU1OS0yLjcxNyAwLTQuOTIgMi4yMDMtNC45MiA0LjkxNyAwIC4zOS4wNDUuNzY1LjEyNyAxLjEyNEM3LjY5MSA4LjA5NCA0LjA2NiA2LjEzIDEuNjQgMy4xNjFjLS40MjcuNzIyLS42NjYgMS41NjEtLjY2NiAyLjQ3NSAwIDEuNzEuODcgMy4yMTMgMi4xODggNC4wOTYtLjgwNy0uMDI2LTEuNTY2LS4yNDgtMi4yMjgtLjYxNnYuMDYxYzAgMi4zODUgMS42OTMgNC4zNzQgMy45NDYgNC44MjctLjQxMy4xMTEtLjg0OS4xNzEtMS4yOTYuMTcxLS4zMTQgMC0uNjE1LS4wMy0uOTE2LS4wODYuNjMxIDEuOTUzIDIuNDQ1IDMuMzc3IDQuNjA0IDMuNDE3LTEuNjggMS4zMTktMy44MDkgMi4xMDUtNi4xMDIgMi4xMDUtLjM5IDAtLjc3OS0uMDIzLTEuMTctLjA2NyAyLjE4OSAxLjM5NCA0Ljc2OCAyLjIwOSA3LjU1NyAyLjIwOSA5LjA1NCAwIDEzLjk5OS03LjQ5NiAxMy45OTktMTMuOTg2IDAtLjIwOSAwLS40Mi0uMDE1LS42My45NjEtLjY4OSAxLjgtMS41NiAyLjQ2LTIuNTQ4bC0uMDQ3LS4wMnoiLz48L3N2Zz4=" alt="twitter"/></a><a style="padding:0 5px;box-shadow:none" target="_blank" rel="noopener noreferrer" href="https://github.com/a7ul/"><img style="display:inline-block;width:1.625rem;margin:0" src="data:image/svg+xml;base64,PHN2ZyBhcmlhLWxhYmVsbGVkYnk9InNpbXBsZWljb25zLWdpdGh1Yi1pY29uIiByb2xlPSJpbWciIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGUgaWQ9InNpbXBsZWljb25zLWdpdGh1Yi1pY29uIj5HaXRIdWIgaWNvbjwvdGl0bGU+PHBhdGggZD0iTTEyIC4yOTdjLTYuNjMgMC0xMiA1LjM3My0xMiAxMiAwIDUuMzAzIDMuNDM4IDkuOCA4LjIwNSAxMS4zODUuNi4xMTMuODItLjI1OC44Mi0uNTc3IDAtLjI4NS0uMDEtMS4wNC0uMDE1LTIuMDQtMy4zMzguNzI0LTQuMDQyLTEuNjEtNC4wNDItMS42MUM0LjQyMiAxOC4wNyAzLjYzMyAxNy43IDMuNjMzIDE3LjdjLTEuMDg3LS43NDQuMDg0LS43MjkuMDg0LS43MjkgMS4yMDUuMDg0IDEuODM4IDEuMjM2IDEuODM4IDEuMjM2IDEuMDcgMS44MzUgMi44MDkgMS4zMDUgMy40OTUuOTk4LjEwOC0uNzc2LjQxNy0xLjMwNS43Ni0xLjYwNS0yLjY2NS0uMy01LjQ2Ni0xLjMzMi01LjQ2Ni01LjkzIDAtMS4zMS40NjUtMi4zOCAxLjIzNS0zLjIyLS4xMzUtLjMwMy0uNTQtMS41MjMuMTA1LTMuMTc2IDAgMCAxLjAwNS0uMzIyIDMuMyAxLjIzLjk2LS4yNjcgMS45OC0uMzk5IDMtLjQwNSAxLjAyLjAwNiAyLjA0LjEzOCAzIC40MDUgMi4yOC0xLjU1MiAzLjI4NS0xLjIzIDMuMjg1LTEuMjMuNjQ1IDEuNjUzLjI0IDIuODczLjEyIDMuMTc2Ljc2NS44NCAxLjIzIDEuOTEgMS4yMyAzLjIyIDAgNC42MS0yLjgwNSA1LjYyNS01LjQ3NSA1LjkyLjQyLjM2LjgxIDEuMDk2LjgxIDIuMjIgMCAxLjYwNi0uMDE1IDIuODk2LS4wMTUgMy4yODYgMCAuMzE1LjIxLjY5LjgyNS41N0MyMC41NjUgMjIuMDkyIDI0IDE3LjU5MiAyNCAxMi4yOTdjMC02LjYyNy01LjM3My0xMi0xMi0xMiIvPjwvc3ZnPg==" alt="github"/></a><a style="padding:0 5px;box-shadow:none" target="_blank" rel="noopener noreferrer" href="https://linkedin.com/in/atulanand94"><img style="display:inline-block;width:1.625rem;margin:0" src="data:image/svg+xml;base64,PHN2ZyBhcmlhLWxhYmVsbGVkYnk9InNpbXBsZWljb25zLWxpbmtlZGluLWljb24iIHJvbGU9ImltZyIgdmlld0JveD0iMCAwIDI0IDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjx0aXRsZSBpZD0ic2ltcGxlaWNvbnMtbGlua2VkaW4taWNvbiI+TGlua2VkSW4gaWNvbjwvdGl0bGU+CjxwYXRoIGZpbGw9IiMwMDc3QjUiIGQ9Ik0yMC40NDcgMjAuNDUyaC0zLjU1NHYtNS41NjljMC0xLjMyOC0uMDI3LTMuMDM3LTEuODUyLTMuMDM3LTEuODUzIDAtMi4xMzYgMS40NDUtMi4xMzYgMi45Mzl2NS42NjdIOS4zNTFWOWgzLjQxNHYxLjU2MWguMDQ2Yy40NzctLjkgMS42MzctMS44NSAzLjM3LTEuODUgMy42MDEgMCA0LjI2NyAyLjM3IDQuMjY3IDUuNDU1djYuMjg2ek01LjMzNyA3LjQzM2MtMS4xNDQgMC0yLjA2My0uOTI2LTIuMDYzLTIuMDY1IDAtMS4xMzguOTItMi4wNjMgMi4wNjMtMi4wNjMgMS4xNCAwIDIuMDY0LjkyNSAyLjA2NCAyLjA2MyAwIDEuMTM5LS45MjUgMi4wNjUtMi4wNjQgMi4wNjV6bTEuNzgyIDEzLjAxOUgzLjU1NVY5aDMuNTY0djExLjQ1MnpNMjIuMjI1IDBIMS43NzFDLjc5MiAwIDAgLjc3NCAwIDEuNzI5djIwLjU0MkMwIDIzLjIyNy43OTIgMjQgMS43NzEgMjRoMjAuNDUxQzIzLjIgMjQgMjQgMjMuMjI3IDI0IDIyLjI3MVYxLjcyOUMyNCAuNzc0IDIzLjIgMCAyMi4yMjIgMGguMDAzeiIvPjwvc3ZnPg==" alt="linkedin"/></a></div></header><hr class="page-spacing"/><header class="page-spacing"><h1 style="text-align:start;margin-bottom:5px">🤖 Beginners guide to writing NodeJS Addons using C++ and N-API (node-addon-api)</h1></header><main class="main-area"><aside class="left-side-area"><div class="side-area-wrapper"><ol class="toc-container"><h4 class="toc-header">Table of contents</h4><li><a href="#what-is-n-api-?">What is N-API ?</a></li><li><a href="#lets-code:-boilerplate-setup">Lets Code: Boilerplate setup</a></li><li><a href="#exporting-a-hello-world-c++-function-using-n-api">Exporting a Hello World C++ function using N-API</a></li><li><a href="#how-about-functions-with-input-parameters-?">How about functions with input parameters ?</a></li><li><a href="#exporting-a-hello-world-c++-class-using-n-api">Exporting a Hello World C++ Class using N-API</a></li><li><a href="#sending-complex-js-objects-to-the-c++-world">Sending complex js objects to the C++ world</a></li><li><a href="#references:">References:</a></li></ol></div></aside><section class="page-spacing center-area"><p style="font-size:0.87055rem;line-height:1.625rem;display:block">June 15, 2018</p><article style="padding-bottom:1.625rem"><p>According to nodejs.org:</p>
<blockquote>
<p>Node.js Addons are dynamically-linked shared objects, written in C++, that can be loaded into Node.js using the require() function, and used just as if they were an ordinary Node.js module. They are used primarily to provide an interface between JavaScript running in Node.js and C/C++ libraries.</p>
</blockquote>
<p>There can be many reasons to write nodejs addons:</p>
<ol>
<li>You may want to access some native apis that is difficult using JS alone.</li>
<li>You may want to integrate a third party library written in C/C++ and use it directly in NodeJs.</li>
<li>You may want to rewrite some of the modules in C++ for performance reasons.</li>
</ol>
<p>Whatever your reason is, this blog focuses on explaining the N-API and how you can use it to build C/C++ based NodeJS addons.</p>
<p>The complete source code from this blog is available at
<a href="https://github.com/a7ul/blog-addons-example">https://github.com/a7ul/blog-addons-example</a>
So, If you are not interested in reading through, you can directly take a look at the code there also.</p>
<h2 id="what-is-n-api-" style="position:relative;"><a href="#what-is-n-api-" aria-label="what is n api  permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What is N-API ?</h2>
<blockquote>
<p>N-API (pronounced N as in the letter, followed by API) is an API for building native Addons. It is independent from the underlying JavaScript runtime (ex V8) and is maintained as part of Node.js itself. This API will be Application Binary Interface (ABI) stable across versions of Node.js. It is intended to insulate Addons from changes in the underlying JavaScript engine and allow modules compiled for one version to run on later versions of Node.js without recompilation.</p>
</blockquote>
<p>In essence , N-API can be used to build NodeJS Addons using C or C++. And the addons built using this would not break across different implementations or versions of NodeJS.</p>
<p>N-API is a stable API as of Node v10 (latest stable release when writing this article). N-API was experimental in Node v8 and v9.</p>
<p>To see a demo of N-API in action watch this youtube video:</p>
<div class="gatsby-resp-iframe-wrapper" style="padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem" > <iframe src="https://www.youtube.com/embed/-Oniup60Afs" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" style=" position: absolute; top: 0; left: 0; width: 100%; height: 100%; "></iframe> </div>
<p>This article will only focus on C++ addons for NodeJs using N-API. For this we will use the node-addon-api (<a href="https://github.com/nodejs/node-addon-api">https://github.com/nodejs/node-addon-api</a>) package from the N-API team which contains header-only C++ wrapper classes for the N-API ( basically it provides C++ object model and exception handling semantics with low overhead).</p>
<p>Since this blog post covers very minimal theory, I suggest you follow through by coding live as you read.</p>
<hr>
<h2 id="lets-code-boilerplate-setup" style="position:relative;"><a href="#lets-code-boilerplate-setup" aria-label="lets code boilerplate setup permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Lets Code: Boilerplate setup</h2>
<p>Create a basic node project test-addon</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">mkdir test-addon
cd test-addon
git init
npm init</code></pre></div>
<p>Install the dependencies:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">npm install node-gyp --save-dev
npm install node-addon-api</code></pre></div>
<p><code class="language-text">node-gyp</code> is the toolchain to compile the addons.</p>
<p><code class="language-text">node-addon-api</code> is a helper project as described earlier that will make writing C++ addons easier.</p>
<p>In the <code class="language-text">package.json</code> set the attribute <code class="language-text">gypfile:true</code> and setup the following files as below:</p>
<p><code class="language-text">.gitignore</code></p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">node_modules
*.log
build</code></pre></div>
<p><code class="language-text">binding.gyp</code></p>
<div class="gatsby-highlight" data-language="gyp"><pre class="language-gyp"><code class="language-gyp">{
    &quot;targets&quot;: [{
        &quot;target_name&quot;: &quot;testaddon&quot;,
        &quot;cflags!&quot;: [ &quot;-fno-exceptions&quot; ],
        &quot;cflags_cc!&quot;: [ &quot;-fno-exceptions&quot; ],
        &quot;sources&quot;: [
            &quot;cppsrc/main.cpp&quot;
        ],
        &#39;include_dirs&#39;: [
            &quot;&lt;!@(node -p \&quot;require(&#39;node-addon-api&#39;).include\&quot;)&quot;
        ],
        &#39;libraries&#39;: [],
        &#39;dependencies&#39;: [
            &quot;&lt;!(node -p \&quot;require(&#39;node-addon-api&#39;).gyp\&quot;)&quot;
        ],
        &#39;defines&#39;: [ &#39;NAPI_DISABLE_CPP_EXCEPTIONS&#39; ]
    }]
}</code></pre></div>
<p><code class="language-text">package.json</code></p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"test-addon"</span><span class="token punctuation">,</span>
  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span><span class="token punctuation">,</span>
  <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
  <span class="token property">"main"</span><span class="token operator">:</span> <span class="token string">"index.js"</span><span class="token punctuation">,</span>
  <span class="token property">"gypfile"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"node-gyp rebuild"</span><span class="token punctuation">,</span>
    <span class="token property">"clean"</span><span class="token operator">:</span> <span class="token string">"node-gyp clean"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"author"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
  <span class="token property">"license"</span><span class="token operator">:</span> <span class="token string">"ISC"</span><span class="token punctuation">,</span>
  <span class="token property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"node-gyp"</span><span class="token operator">:</span> <span class="token string">"^3.7.0"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"node-addon-api"</span><span class="token operator">:</span> <span class="token string">"^1.3.0"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">binding.gyp</code> file contains all the files that need to be compiled and all the include files / libraries that the project will be using. If you notice we have added <code class="language-text">cppsrc/main.cpp</code> file as our source file.</p>
<p>Also our package.json mentions a <code class="language-text">index.js</code> file as its main file.</p>
<p>Lets create both of them :</p>
<p><code class="language-text">cppsrc/main.cpp</code></p>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp">
<span class="token comment">/* cppsrc/main.cpp */</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;napi.h></span></span>

Napi<span class="token double-colon punctuation">::</span>Object <span class="token function">InitAll</span><span class="token punctuation">(</span>Napi<span class="token double-colon punctuation">::</span>Env env<span class="token punctuation">,</span> Napi<span class="token double-colon punctuation">::</span>Object exports<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> exports<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">NODE_API_MODULE</span><span class="token punctuation">(</span>testaddon<span class="token punctuation">,</span> InitAll<span class="token punctuation">)</span></code></pre></div>
<p><code class="language-text">index.js</code></p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">//index.js</span>
<span class="token keyword">const</span> testAddon <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./build/Release/testaddon.node'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> testAddon<span class="token punctuation">;</span></code></pre></div>
<p>The base boilerplate is complete. Lets try and build our addon.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">npm run build</code></pre></div>
<p>You should have an output similar to this:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">npm run build

> test-addon@1.0.0 build /Users/atulr/Projects/Hobby/test-addon
> node-gyp rebuild
SOLINK_MODULE(target) Release/nothing.node
  CXX(target) Release/obj.target/testaddon/cppsrc/main.o
  SOLINK_MODULE(target) Release/testaddon.node</code></pre></div>
<p>Wohoo 🕺 compilation was successful 🚀. Lets run it 😄</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">node index.js</code></pre></div>
<p>Sadly you will not get any output here. Ideally you should use a debugger tool to debug and see what the contents of <code class="language-text">testAddon</code> is but for demo here lets just add a <code class="language-text">console.log</code> like this:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">//index.js</span>
<span class="token keyword">const</span> testAddon <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./build/Release/testaddon.node'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'addon'</span><span class="token punctuation">,</span>testAddon<span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> testAddon<span class="token punctuation">;</span></code></pre></div>
<p>Now run <code class="language-text">index.js</code> again.</p>
<p>You should see an output like this :</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">node index.js
addon {}</code></pre></div>
<p>Awesome !! Now we have a working setup to start with.</p>
<p>Before we go ahead, lets take a look at <code class="language-text">cppsrc/main.cpp</code> in detail:</p>
<ol>
<li><code class="language-text">#include&lt;napi.h></code> includes the napi header file so that we can access all the helper macros, classes and functions.</li>
<li><code class="language-text">NODE_API_MODULE</code> is a macro that accepts modulename and registerfunction as parameters.</li>
<li>In our case registerfunction is <code class="language-text">InitAll</code> and it takes two parameters which are passed by N-API. First parameter <code class="language-text">env</code> is the context that needs to be passed on to most N-API function and <code class="language-text">exports</code> is the object used to set the exported functions and classes via N-API.</li>
</ol>
<p>The source code documentation for NODE_API_MODULE says:</p>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token comment">/**
* This code defines the entry-point for the Node addon, it tells Node where to go
* once the library has been loaded into active memory. The first argument must
* match the "target" in our *binding.gyp*. Using NODE_GYP_MODULE_NAME ensures
* that the argument will be correct, as long as the module is built with
* node-gyp (which is the usual way of building modules). The second argument
* points to the function to invoke. The function must not be namespaced.
*/</span>

<span class="token function">NODE_API_MODULE</span><span class="token punctuation">(</span>NODE_GYP_MODULE_NAME<span class="token punctuation">,</span> Init<span class="token punctuation">)</span></code></pre></div>
<p>To read in more depth you can visit the documentation of node-gyp here: </p>
<p><a href="https://github.com/nodejs/node-addon-api/blob/master/doc/node-gyp.md">https://github.com/nodejs/node-addon-api/blob/master/doc/node-gyp.md</a></p>
<hr>
<h2 id="exporting-a-hello-world-c-function-using-n-api" style="position:relative;"><a href="#exporting-a-hello-world-c-function-using-n-api" aria-label="exporting a hello world c function using n api permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exporting a Hello World C++ function using N-API</h2>
<p>Now lets add an example of exporting a C++ function to NodeJS.
Lets take an example of a simple function</p>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp">std<span class="token double-colon punctuation">::</span>string <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">"Hello World"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Lets try to export hello to Javascript side with our addon.</p>
<p>Create the following files:</p>
<p><code class="language-text">cppsrc/Samples/functionexample.h</code></p>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;napi.h></span></span>
<span class="token keyword">namespace</span> functionexample <span class="token punctuation">{</span>
  std<span class="token double-colon punctuation">::</span>string <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Napi<span class="token double-colon punctuation">::</span>String <span class="token function">HelloWrapped</span><span class="token punctuation">(</span><span class="token keyword">const</span> Napi<span class="token double-colon punctuation">::</span>CallbackInfo<span class="token operator">&amp;</span> info<span class="token punctuation">)</span><span class="token punctuation">;</span>
  Napi<span class="token double-colon punctuation">::</span>Object <span class="token function">Init</span><span class="token punctuation">(</span>Napi<span class="token double-colon punctuation">::</span>Env env<span class="token punctuation">,</span> Napi<span class="token double-colon punctuation">::</span>Object exports<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The corresponding <code class="language-text">cppsrc/Samples/functionexample.cpp</code></p>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"functionexample.h"</span></span>
std<span class="token double-colon punctuation">::</span>string functionexample<span class="token double-colon punctuation">::</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">"Hello World"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Napi<span class="token double-colon punctuation">::</span>String functionexample<span class="token double-colon punctuation">::</span><span class="token function">HelloWrapped</span><span class="token punctuation">(</span><span class="token keyword">const</span> Napi<span class="token double-colon punctuation">::</span>CallbackInfo<span class="token operator">&amp;</span> info<span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
  Napi<span class="token double-colon punctuation">::</span>Env env <span class="token operator">=</span> info<span class="token punctuation">.</span><span class="token function">Env</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Napi<span class="token double-colon punctuation">::</span>String returnValue <span class="token operator">=</span> Napi<span class="token double-colon punctuation">::</span><span class="token class-name">String</span><span class="token double-colon punctuation">::</span><span class="token function">New</span><span class="token punctuation">(</span>env<span class="token punctuation">,</span> functionexample<span class="token double-colon punctuation">::</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token keyword">return</span> returnValue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Napi<span class="token double-colon punctuation">::</span>Object functionexample<span class="token double-colon punctuation">::</span><span class="token function">Init</span><span class="token punctuation">(</span>Napi<span class="token double-colon punctuation">::</span>Env env<span class="token punctuation">,</span> Napi<span class="token double-colon punctuation">::</span>Object exports<span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
  exports<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span>
<span class="token string">"hello"</span><span class="token punctuation">,</span> Napi<span class="token double-colon punctuation">::</span><span class="token class-name">Function</span><span class="token double-colon punctuation">::</span><span class="token function">New</span><span class="token punctuation">(</span>env<span class="token punctuation">,</span> functionexample<span class="token double-colon punctuation">::</span>HelloWrapped<span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
 
  <span class="token keyword">return</span> exports<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Wow ! Looks like a lot. But if you look closely, its not as complex as it looks. For every function in C++ we want to export we will basically create a NAPI wrapped function (<code class="language-text">HelloWrapped</code> in this example) and add it to the exports object using <code class="language-text">Init</code>.</p>
<p>Lets take some time to understand <code class="language-text">HelloWrapped</code> function. Every wrapped function that needs to be exported to JS should have input params/return value from the Napi namespace.</p>
<p>Every wrapped function takes in <code class="language-text">CallbackInfo</code> as the input parameter. This contains things like the context and the input parameters that needs to be passed to the function.</p>
<p><code class="language-text">Init</code> function is used to just set the export key as <code class="language-text">hello</code> with corresponding wrapped function <code class="language-text">HelloWrapped </code>.</p>
<p>Now we need to make our <code class="language-text">node-gyp</code> know that we have added extra c++ files. So make the following changes to <code class="language-text">binding.gyp</code>, <code class="language-text">main.cpp</code> and <code class="language-text">index.js</code></p>
<div class="gatsby-highlight" data-language="diff"><pre class="language-diff"><code class="language-diff">diff --git a/binding.gyp b/binding.gyp
index 23b9976..2d188af 100644
<span class="token coord">--- a/binding.gyp</span>
<span class="token coord">+++ b/binding.gyp</span>
<span class="token coord">@@ -4,7 +4,8 @@</span>
<span class="token unchanged"><span class="token prefix unchanged"> </span>        "cflags!": [ "-fno-exceptions" ],
<span class="token prefix unchanged"> </span>        "cflags_cc!": [ "-fno-exceptions" ],
<span class="token prefix unchanged"> </span>        "sources": [
</span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>            "cppsrc/main.cpp"
</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>            "cppsrc/main.cpp",
<span class="token prefix inserted">+</span>            "cppsrc/Samples/functionexample.cpp"
</span><span class="token unchanged"><span class="token prefix unchanged"> </span>        ],
<span class="token prefix unchanged"> </span>        'include_dirs': [
<span class="token prefix unchanged"> </span>            "&lt;!@(node -p \"require('node-addon-api').include\")"
</span>


diff --git a/cppsrc/main.cpp b/cppsrc/main.cpp
index f016c4e..f62ed77 100644
<span class="token coord">--- a/cppsrc/main.cpp</span>
<span class="token coord">+++ b/cppsrc/main.cpp</span>
<span class="token coord">@@ -1,7 +1,8 @@</span>
<span class="token unchanged"><span class="token prefix unchanged"> </span>#include &lt;napi.h>
</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>#include "Samples/functionexample.h"
</span><span class="token unchanged"><span class="token prefix unchanged"> </span>
<span class="token prefix unchanged"> </span>Napi::Object InitAll(Napi::Env env, Napi::Object exports) {
</span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>  return exports;
</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>  return functionexample::Init(env, exports);
</span><span class="token unchanged"><span class="token prefix unchanged"> </span>}
<span class="token prefix unchanged"> </span>
<span class="token prefix unchanged"> </span>NODE_API_MODULE(testaddon, InitAll)
</span>


diff --git a/index.js b/index.js
index 65f955e..e91b98f 100644
<span class="token coord">--- a/index.js</span>
<span class="token coord">+++ b/index.js</span>
<span class="token coord">@@ -1,3 +1,4 @@</span>
<span class="token unchanged"><span class="token prefix unchanged"> </span>const testAddon = require('./build/Release/testaddon.node');
<span class="token prefix unchanged"> </span>console.log('addon',testAddon);
</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>console.log(testAddon.hello());
</span><span class="token unchanged"><span class="token prefix unchanged"> </span>module.exports = testAddon;
</span></code></pre></div>
<p><strong>Remember : Any change in c++ src files will need recompilation before you can use the changes in NodeJS.</strong>
 
So make sure you run <code class="language-text">npm run build</code> again after changing c++ files.</p>
<p>Also when you add a new header file/cpp file :</p>
<ol>
<li>Add it to <code class="language-text">binding.gyp</code> </li>
<li>Add it to <code class="language-text">main.cpp</code> </li>
<li>Do <code class="language-text">npm rebuild</code> and access it via JS.</li>
</ol>
<p>Now run it!</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">node index.js </code></pre></div>
<p>You should see the output as follows:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">node index.js
addon { hello: [Function] }
Hello World</code></pre></div>
<p>Voila 🚀 Now we have a hello world from C++ world into JS World!</p>
<hr>
<h2 id="how-about-functions-with-input-parameters-" style="position:relative;"><a href="#how-about-functions-with-input-parameters-" aria-label="how about functions with input parameters  permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How about functions with input parameters ?</h2>
<p>Lets say that the function that we want to export has both input and output params.</p>
<p>For example:</p>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>To add the function we will make the following changes:</p>
<div class="gatsby-highlight" data-language="diff"><pre class="language-diff"><code class="language-diff">diff --git a/cppsrc/Samples/functionexample.cpp b/cppsrc/Samples/functionexample.cpp
index 0bd9bc2..37b7eb9 100644
<span class="token coord">--- a/cppsrc/Samples/functionexample.cpp</span>
<span class="token coord">+++ b/cppsrc/Samples/functionexample.cpp</span>
@@ -4,13 +4,33 @@ std::string functionexample::hello(){
<span class="token unchanged"><span class="token prefix unchanged"> </span>    return "Hello World";
<span class="token prefix unchanged"> </span>}
<span class="token prefix unchanged"> </span>
</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>int functionexample::add(int a, int b){
<span class="token prefix inserted">+</span>  return a + b;
<span class="token prefix inserted">+</span>}
<span class="token prefix inserted">+</span>
</span><span class="token unchanged"><span class="token prefix unchanged"> </span>Napi::String functionexample::HelloWrapped(const Napi::CallbackInfo&amp; info) {
<span class="token prefix unchanged"> </span>    Napi::Env env = info.Env();
<span class="token prefix unchanged"> </span>    Napi::String returnValue = Napi::String::New(env, functionexample::hello());
<span class="token prefix unchanged"> </span>    return returnValue;
<span class="token prefix unchanged"> </span>}
<span class="token prefix unchanged"> </span>
</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>
<span class="token prefix inserted">+</span>Napi::Number functionexample::AddWrapped(const Napi::CallbackInfo&amp; info) {
<span class="token prefix inserted">+</span>    Napi::Env env = info.Env();
<span class="token prefix inserted">+</span>    if (info.Length() &lt; 2 || !info[0].IsNumber() || !info[1].IsNumber()) {
<span class="token prefix inserted">+</span>        Napi::TypeError::New(env, "Number expected").ThrowAsJavaScriptException();
<span class="token prefix inserted">+</span>    } 
<span class="token prefix inserted">+</span>
<span class="token prefix inserted">+</span>    Napi::Number first = info[0].As&lt;Napi::Number>();
<span class="token prefix inserted">+</span>    Napi::Number second = info[1].As&lt;Napi::Number>();
<span class="token prefix inserted">+</span>
<span class="token prefix inserted">+</span>    int returnValue = functionexample::add(first.Int32Value(), second.Int32Value());
<span class="token prefix inserted">+</span>    
<span class="token prefix inserted">+</span>    return Napi::Number::New(env, returnValue);
<span class="token prefix inserted">+</span>}
<span class="token prefix inserted">+</span>
</span><span class="token unchanged"><span class="token prefix unchanged"> </span>Napi::Object functionexample::Init(Napi::Env env, Napi::Object exports) {
<span class="token prefix unchanged"> </span>    exports.Set("hello", Napi::Function::New(env, functionexample::HelloWrapped));
</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>    exports.Set("add", Napi::Function::New(env, functionexample::AddWrapped));
</span><span class="token unchanged"><span class="token prefix unchanged"> </span>    return exports;
<span class="token prefix unchanged"> </span>}
<span class="token prefix unchanged"> </span>
<span class="token prefix unchanged"> </span>
</span>diff --git a/cppsrc/Samples/functionexample.h b/cppsrc/Samples/functionexample.h
index 44563aa..e15aa7b 100644
<span class="token coord">--- a/cppsrc/Samples/functionexample.h</span>
<span class="token coord">+++ b/cppsrc/Samples/functionexample.h</span>
@@ -4,6 +4,10 @@ namespace functionexample {
<span class="token unchanged"><span class="token prefix unchanged"> </span>
<span class="token prefix unchanged"> </span>    std::string hello();
<span class="token prefix unchanged"> </span>    Napi::String HelloWrapped(const Napi::CallbackInfo&amp; info);
</span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>    Napi::Object Init(Napi::Env env, Napi::Object exports);
</span><span class="token unchanged"><span class="token prefix unchanged"> </span>
</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>    int add(int a, int b);
<span class="token prefix inserted">+</span>    Napi::Number AddWrapped(const Napi::CallbackInfo&amp; info);
<span class="token prefix inserted">+</span>
<span class="token prefix inserted">+</span>    Napi::Object Init(Napi::Env env, Napi::Object exports);
<span class="token prefix inserted">+</span>    
</span><span class="token unchanged"><span class="token prefix unchanged"> </span>}
<span class="token prefix unchanged"> </span>
<span class="token prefix unchanged"> </span>
</span>diff --git a/index.js b/index.js
index e91b98f..72860f8 100644
<span class="token coord">--- a/index.js</span>
<span class="token coord">+++ b/index.js</span>
<span class="token coord">@@ -1,4 +1,5 @@</span>
<span class="token unchanged"><span class="token prefix unchanged"> </span>const testAddon = require('./build/Release/testaddon.node');
<span class="token prefix unchanged"> </span>console.log('addon',testAddon);
</span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>console.log(testAddon.hello());
</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>console.log('hello ', testAddon.hello());
<span class="token prefix inserted">+</span>console.log('add ', testAddon.add(5, 10));
</span><span class="token unchanged"><span class="token prefix unchanged"> </span>module.exports = testAddon;
</span></code></pre></div>
<p><strong>Explanation:</strong></p>
<ol>
<li>We added a simple <code class="language-text">add</code> function.</li>
<li>We added the wrapper for the add function : <code class="language-text">AddWrapped</code> which is used to interface the add function with N-API.</li>
<li>We added the key add to export the <code class="language-text">AddWrapped</code> function to the JS.</li>
</ol>
<p>I believe the example is fairly straightforward and self explanatory. If more explanation is needed, let me know in the comments and I ll add more details here.</p>
<p>Passing complex references and objects to the functions will be covered in the later sections below.</p>
<p><strong>Output:</strong></p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">node index.js
addon { hello: [Function], add: [Function] }
hello  Hello World
add  15</code></pre></div>
<p>Awesome 🥳</p>
<hr>
<h2 id="exporting-a-hello-world-c-class-using-n-api" style="position:relative;"><a href="#exporting-a-hello-world-c-class-using-n-api" aria-label="exporting a hello world c class using n api permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exporting a Hello World C++ Class using N-API</h2>
<p>Lets create a simple C++ class that stores a double value. The member functions are pretty self explanatory.</p>
<p><code class="language-text">cppsrc/Samples/actualclass.cpp</code></p>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token comment">/* cppsrc/Samples/actualclass.cpp */</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"actualclass.h"</span></span>

<span class="token class-name">ActualClass</span><span class="token double-colon punctuation">::</span><span class="token function">ActualClass</span><span class="token punctuation">(</span><span class="token keyword">double</span> value<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token operator">-></span>value_ <span class="token operator">=</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">double</span> <span class="token class-name">ActualClass</span><span class="token double-colon punctuation">::</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token operator">-></span>value_<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">double</span> <span class="token class-name">ActualClass</span><span class="token double-colon punctuation">::</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">double</span> toAdd<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token operator">-></span>value_ <span class="token operator">+=</span> toAdd<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token operator">-></span>value_<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">cppsrc/Samples/actualclass.h</code></p>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token comment">/* cppsrc/Samples/actualclass.h */</span>

<span class="token keyword">class</span> <span class="token class-name">ActualClass</span> <span class="token punctuation">{</span>
 <span class="token keyword">public</span><span class="token operator">:</span>
  <span class="token function">ActualClass</span><span class="token punctuation">(</span><span class="token keyword">double</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//constructor</span>
  <span class="token keyword">double</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//getter for the value</span>
  <span class="token keyword">double</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">double</span> toAdd<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//adds the toAdd value to the value_</span>
 <span class="token keyword">private</span><span class="token operator">:</span>
  <span class="token keyword">double</span> value_<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>I believe the above code is pretty straightforward and self explanatory.
To export this class to JS side we will need to create a wrapper class. Lets name the wrapper class as <code class="language-text">ClassExample </code>.</p>
<p>Create the wrapper Class as follows:</p>
<blockquote>
<p>Please look at the <code class="language-text">classexample.h</code> first and try to grasp the intent of the Wrapper class before going to the implementation.</p>
</blockquote>
<p><code class="language-text">cppsrc/Samples/classexample.h</code></p>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token comment">/* cppsrc/Samples/classexample.h */</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;napi.h></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"actualclass.h"</span></span>

<span class="token keyword">class</span> <span class="token class-name">ClassExample</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> Napi<span class="token double-colon punctuation">::</span><span class="token class-name">ObjectWrap</span><span class="token operator">&lt;</span><span class="token class-name">ClassExample</span><span class="token operator">></span></span> <span class="token punctuation">{</span>
 <span class="token keyword">public</span><span class="token operator">:</span>
  <span class="token keyword">static</span> Napi<span class="token double-colon punctuation">::</span>Object <span class="token function">Init</span><span class="token punctuation">(</span>Napi<span class="token double-colon punctuation">::</span>Env env<span class="token punctuation">,</span> Napi<span class="token double-colon punctuation">::</span>Object exports<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Init function for setting the export key to JS</span>
  <span class="token function">ClassExample</span><span class="token punctuation">(</span><span class="token keyword">const</span> Napi<span class="token double-colon punctuation">::</span>CallbackInfo<span class="token operator">&amp;</span> info<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Constructor to initialise</span>

 <span class="token keyword">private</span><span class="token operator">:</span>
  <span class="token keyword">static</span> Napi<span class="token double-colon punctuation">::</span>FunctionReference constructor<span class="token punctuation">;</span> <span class="token comment">//reference to store the class definition that needs to be exported to JS</span>
  Napi<span class="token double-colon punctuation">::</span>Value <span class="token function">GetValue</span><span class="token punctuation">(</span><span class="token keyword">const</span> Napi<span class="token double-colon punctuation">::</span>CallbackInfo<span class="token operator">&amp;</span> info<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//wrapped getValue function </span>
  Napi<span class="token double-colon punctuation">::</span>Value <span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">const</span> Napi<span class="token double-colon punctuation">::</span>CallbackInfo<span class="token operator">&amp;</span> info<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//wrapped add function</span>
  ActualClass <span class="token operator">*</span>actualClass_<span class="token punctuation">;</span> <span class="token comment">//internal instance of actualclass used to perform actual operations.</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div>
<p><code class="language-text">cppsrc/Samples/classexample.cpp</code></p>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token comment">/* cppsrc/Samples/classexample.cpp */</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"classexample.h"</span></span>

Napi<span class="token double-colon punctuation">::</span>FunctionReference ClassExample<span class="token double-colon punctuation">::</span>constructor<span class="token punctuation">;</span>

Napi<span class="token double-colon punctuation">::</span>Object <span class="token class-name">ClassExample</span><span class="token double-colon punctuation">::</span><span class="token function">Init</span><span class="token punctuation">(</span>Napi<span class="token double-colon punctuation">::</span>Env env<span class="token punctuation">,</span> Napi<span class="token double-colon punctuation">::</span>Object exports<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Napi<span class="token double-colon punctuation">::</span>HandleScope <span class="token function">scope</span><span class="token punctuation">(</span>env<span class="token punctuation">)</span><span class="token punctuation">;</span>

  Napi<span class="token double-colon punctuation">::</span>Function func <span class="token operator">=</span> <span class="token function">DefineClass</span><span class="token punctuation">(</span>env<span class="token punctuation">,</span> <span class="token string">"ClassExample"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">InstanceMethod</span><span class="token punctuation">(</span><span class="token string">"add"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>ClassExample<span class="token double-colon punctuation">::</span>Add<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">InstanceMethod</span><span class="token punctuation">(</span><span class="token string">"getValue"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>ClassExample<span class="token double-colon punctuation">::</span>GetValue<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  constructor <span class="token operator">=</span> <span class="token class-name">Napi</span><span class="token double-colon punctuation">::</span><span class="token function">Persistent</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">;</span>
  constructor<span class="token punctuation">.</span><span class="token function">SuppressDestruct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  exports<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"ClassExample"</span><span class="token punctuation">,</span> func<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> exports<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">ClassExample</span><span class="token double-colon punctuation">::</span><span class="token function">ClassExample</span><span class="token punctuation">(</span><span class="token keyword">const</span> Napi<span class="token double-colon punctuation">::</span>CallbackInfo<span class="token operator">&amp;</span> info<span class="token punctuation">)</span> <span class="token operator">:</span> Napi<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">ObjectWrap</span><span class="token generic class-name"><span class="token operator">&lt;</span>ClassExample<span class="token operator">></span></span></span><span class="token punctuation">(</span>info<span class="token punctuation">)</span>  <span class="token punctuation">{</span>
  Napi<span class="token double-colon punctuation">::</span>Env env <span class="token operator">=</span> info<span class="token punctuation">.</span><span class="token function">Env</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Napi<span class="token double-colon punctuation">::</span>HandleScope <span class="token function">scope</span><span class="token punctuation">(</span>env<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">int</span> length <span class="token operator">=</span> info<span class="token punctuation">.</span><span class="token function">Length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>length <span class="token operator">!=</span> <span class="token number">1</span> <span class="token operator">||</span> <span class="token operator">!</span>info<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">IsNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Napi<span class="token double-colon punctuation">::</span><span class="token class-name">TypeError</span><span class="token double-colon punctuation">::</span><span class="token function">New</span><span class="token punctuation">(</span>env<span class="token punctuation">,</span> <span class="token string">"Number expected"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ThrowAsJavaScriptException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  Napi<span class="token double-colon punctuation">::</span>Number value <span class="token operator">=</span> info<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token generic-function"><span class="token function">As</span><span class="token generic class-name"><span class="token operator">&lt;</span>Napi<span class="token double-colon punctuation">::</span>Number<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token operator">-></span>actualClass_ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ActualClass</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span><span class="token function">DoubleValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Napi<span class="token double-colon punctuation">::</span>Value <span class="token class-name">ClassExample</span><span class="token double-colon punctuation">::</span><span class="token function">GetValue</span><span class="token punctuation">(</span><span class="token keyword">const</span> Napi<span class="token double-colon punctuation">::</span>CallbackInfo<span class="token operator">&amp;</span> info<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Napi<span class="token double-colon punctuation">::</span>Env env <span class="token operator">=</span> info<span class="token punctuation">.</span><span class="token function">Env</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Napi<span class="token double-colon punctuation">::</span>HandleScope <span class="token function">scope</span><span class="token punctuation">(</span>env<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">double</span> num <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-></span>actualClass_<span class="token operator">-></span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> Napi<span class="token double-colon punctuation">::</span><span class="token class-name">Number</span><span class="token double-colon punctuation">::</span><span class="token function">New</span><span class="token punctuation">(</span>env<span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


Napi<span class="token double-colon punctuation">::</span>Value <span class="token class-name">ClassExample</span><span class="token double-colon punctuation">::</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">const</span> Napi<span class="token double-colon punctuation">::</span>CallbackInfo<span class="token operator">&amp;</span> info<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Napi<span class="token double-colon punctuation">::</span>Env env <span class="token operator">=</span> info<span class="token punctuation">.</span><span class="token function">Env</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Napi<span class="token double-colon punctuation">::</span>HandleScope <span class="token function">scope</span><span class="token punctuation">(</span>env<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>  info<span class="token punctuation">.</span><span class="token function">Length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">1</span> <span class="token operator">||</span> <span class="token operator">!</span>info<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">IsNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Napi<span class="token double-colon punctuation">::</span><span class="token class-name">TypeError</span><span class="token double-colon punctuation">::</span><span class="token function">New</span><span class="token punctuation">(</span>env<span class="token punctuation">,</span> <span class="token string">"Number expected"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ThrowAsJavaScriptException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  Napi<span class="token double-colon punctuation">::</span>Number toAdd <span class="token operator">=</span> info<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token generic-function"><span class="token function">As</span><span class="token generic class-name"><span class="token operator">&lt;</span>Napi<span class="token double-colon punctuation">::</span>Number<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">double</span> answer <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-></span>actualClass_<span class="token operator">-></span><span class="token function">add</span><span class="token punctuation">(</span>toAdd<span class="token punctuation">.</span><span class="token function">DoubleValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> Napi<span class="token double-colon punctuation">::</span><span class="token class-name">Number</span><span class="token double-colon punctuation">::</span><span class="token function">New</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span><span class="token function">Env</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> answer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>Lets take a good look at the header file of our wrapper class <code class="language-text">classexample.h</code>:</p>
<p>As mentioned before, Anything that needs to be exported to JS world needs to be wrapped with N-API. Hence:</p>
<ol>
<li>First step is to create a wrapper class which extends <code class="language-text">Napi::ObjectWrap&lt;ClassExample></code> . </li>
<li>Just like in case of functions we need a <code class="language-text">Init</code> method to set the export key.</li>
<li>Except the <code class="language-text">static Napi::FunctionReference constructor;</code> rest all the methods are self explanatory.</li>
</ol>
<p>Now, lets take a look at the actual implementation <code class="language-text">classexample.cpp</code>.</p>
<ol>
<li><code class="language-text">ClassExample::Init</code> function is responsible to create and set the export key. Here we will export the class as <code class="language-text">ClassExample</code> to the JS side.</li>
</ol>
<p>Important part here is:</p>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp">Napi<span class="token double-colon punctuation">::</span>Function func <span class="token operator">=</span> <span class="token function">DefineClass</span><span class="token punctuation">(</span>env<span class="token punctuation">,</span> <span class="token string">"ClassExample"</span><span class="token punctuation">,</span> 
<span class="token punctuation">{</span>
  <span class="token function">InstanceMethod</span><span class="token punctuation">(</span><span class="token string">"add"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>ClassExample<span class="token double-colon punctuation">::</span>Add<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">InstanceMethod</span><span class="token punctuation">(</span><span class="token string">"getValue"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>ClassExample<span class="token double-colon punctuation">::</span>GetValue<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
constructor <span class="token operator">=</span> <span class="token class-name">Napi</span><span class="token double-colon punctuation">::</span><span class="token function">Persistent</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p><code class="language-text">func</code> is used to define the class that will be exported to JS and then the <code class="language-text">func</code> is assigned to constructor which is a static function reference in c++. This is where the earlier defined <code class="language-text">static Napi::FunctionReference constructor;</code> comes in. Similar to <code class="language-text">InstanceMethod</code> there are various methods defined in NAPI to export different types of class methods. For example: Static methods can be exported using <code class="language-text">StaticMethod</code>.</p>
<p>If you are wondering what <code class="language-text">env</code> is:</p>
<blockquote>
<p>env is the environment that represent an independent instance of the JavaScript runtime</p>
</blockquote>
<p>I think of it as the js context that needs to be passed around to most NAPI functions as the first argument.</p>
<ol>
<li>Now lets see the implementation of <code class="language-text">ClassExample::Add</code> function.</li>
</ol>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp">Napi<span class="token double-colon punctuation">::</span>Value <span class="token class-name">ClassExample</span><span class="token double-colon punctuation">::</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">const</span> Napi<span class="token double-colon punctuation">::</span>CallbackInfo<span class="token operator">&amp;</span> info<span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
  Napi<span class="token double-colon punctuation">::</span>Env env <span class="token operator">=</span> info<span class="token punctuation">.</span><span class="token function">Env</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Napi<span class="token double-colon punctuation">::</span>HandleScope <span class="token function">scope</span><span class="token punctuation">(</span>env<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span><span class="token function">Length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">1</span> <span class="token operator">||</span> <span class="token operator">!</span>info<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">IsNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     Napi<span class="token double-colon punctuation">::</span><span class="token class-name">TypeError</span><span class="token double-colon punctuation">::</span><span class="token function">New</span><span class="token punctuation">(</span>env<span class="token punctuation">,</span> <span class="token string">"Numberexpected"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ThrowAsJavaScriptException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  Napi<span class="token double-colon punctuation">::</span>Number toAdd <span class="token operator">=</span> info<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token generic-function"><span class="token function">As</span><span class="token generic class-name"><span class="token operator">&lt;</span>Napi<span class="token double-colon punctuation">::</span>Number<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">double</span> answer <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-></span>actualClass_<span class="token operator">-></span><span class="token function">add</span><span class="token punctuation">(</span>toAdd<span class="token punctuation">.</span><span class="token function">DoubleValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> Napi<span class="token double-colon punctuation">::</span><span class="token class-name">Number</span><span class="token double-colon punctuation">::</span><span class="token function">New</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span><span class="token function">Env</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> answer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<ul>
<li>Here input params are checked first using info from <code class="language-text">env</code>.</li>
<li>Now, to read a value from JS side we read it like <code class="language-text">info[0].As&lt;Napi::Number>();</code>.</li>
<li>Since C++ is a strongly typed language and JS is not. We have to convert every value that we get from JS side to its appropriate type. After we convert the value we simply call the internal <code class="language-text">actualClass</code> instance and return the value.</li>
<li>But since the value is a double we need to wrap it with a Napi::Number instance so that it can be passed to the JS side.</li>
</ul>
<p><strong>We are not done yet. Remember we need to now add entries to tell the compiler to compile the new source files we added.</strong></p>
<div class="gatsby-highlight" data-language="diff"><pre class="language-diff"><code class="language-diff">diff --git a/binding.gyp b/binding.gyp
index 2d188af..031bf18 100644
<span class="token coord">--- a/binding.gyp</span>
<span class="token coord">+++ b/binding.gyp</span>
<span class="token coord">@@ -5,7 +5,9 @@</span>
<span class="token unchanged"><span class="token prefix unchanged"> </span>        "cflags_cc!": [ "-fno-exceptions" ],
<span class="token prefix unchanged"> </span>        "sources": [
<span class="token prefix unchanged"> </span>            "cppsrc/main.cpp",
</span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>            "cppsrc/Samples/functionexample.cpp"
</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>            "cppsrc/Samples/functionexample.cpp",
<span class="token prefix inserted">+</span>            "cppsrc/Samples/actualclass.cpp",
<span class="token prefix inserted">+</span>            "cppsrc/Samples/classexample.cpp"
</span><span class="token unchanged"><span class="token prefix unchanged"> </span>        ],
<span class="token prefix unchanged"> </span>        'include_dirs': [
<span class="token prefix unchanged"> </span>            "&lt;!@(node -p \"require('node-addon-api').include\")"
<span class="token prefix unchanged"> </span>            
<span class="token prefix unchanged"> </span>            
</span>diff --git a/cppsrc/main.cpp b/cppsrc/main.cpp
index f62ed77..2b739d3 100644
<span class="token coord">--- a/cppsrc/main.cpp</span>
<span class="token coord">+++ b/cppsrc/main.cpp</span>
<span class="token coord">@@ -1,8 +1,10 @@</span>
<span class="token unchanged"><span class="token prefix unchanged"> </span>#include &lt;napi.h>
<span class="token prefix unchanged"> </span>#include "Samples/functionexample.h"
</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>#include "Samples/classexample.h"
</span><span class="token unchanged"><span class="token prefix unchanged"> </span>
<span class="token prefix unchanged"> </span>Napi::Object InitAll(Napi::Env env, Napi::Object exports) {
</span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>  return functionexample::Init(env, exports);
</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>  functionexample::Init(env, exports);
<span class="token prefix inserted">+</span>  return ClassExample::Init(env, exports);
</span><span class="token unchanged"><span class="token prefix unchanged"> </span>}
<span class="token prefix unchanged"> </span>
</span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>NODE_API_MODULE(testaddon, InitAll)
</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>NODE_API_MODULE(NODE_GYP_MODULE_NAME, InitAll)
</span>

diff --git a/index.js b/index.js
index 72860f8..d849e0e 100644
<span class="token coord">--- a/index.js</span>
<span class="token coord">+++ b/index.js</span>
@@ -2,4 +2,9 @@ const testAddon = require('./build/Release/testaddon.node');
<span class="token unchanged"><span class="token prefix unchanged"> </span>console.log('addon',testAddon);
<span class="token prefix unchanged"> </span>console.log('hello ', testAddon.hello());
<span class="token prefix unchanged"> </span>console.log('add ', testAddon.add(5, 10));
</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>
<span class="token prefix inserted">+</span>
<span class="token prefix inserted">+</span>const classInstance = new testAddon.ClassExample(4.3);
<span class="token prefix inserted">+</span>console.log('Testing class initial value : ',classInstance.getValue());
<span class="token prefix inserted">+</span>console.log('After adding 3.3 : ',classInstance.add(3.3));
</span><span class="token unchanged"><span class="token prefix unchanged"> </span>module.exports = testAddon;</span></code></pre></div>
<p>Make the above changes and run <code class="language-text">npm run build</code>, followed by <code class="language-text">node index.js</code>.
 
Notice that we have to both <code class="language-text">classexample.cpp</code> and <code class="language-text">actualclass.cpp</code> in the <code class="language-text">binding.gyp</code>. The reason is that both classes are written by us. If you have a thrid party library c++ file. Then you would need to include the precompiled dynamic library in the <code class="language-text">libraries</code> section of <code class="language-text">binding.gyp</code> instead.</p>
<p><strong>Output:</strong></p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">node index.js
addon { hello: [Function],
  add: [Function],
  ClassExample: [Function: ClassExample] }
hello  Hello World
add  15
Testing class initial value :  4.3
After adding 3.3 :  7.6</code></pre></div>
<p>That was easy 😂 Wasn’t it 😜?</p>
<p>This <strong>should be enough for most use cases</strong>. But if you need to know how to send <em>class instances back/any complex object between JS and C++</em> read on.</p>
<hr>
<h2 id="sending-complex-js-objects-to-the-c-world" style="position:relative;"><a href="#sending-complex-js-objects-to-the-c-world" aria-label="sending complex js objects to the c world permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sending complex js objects to the C++ world</h2>
<p>Lets say we have a use case like below:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> prevInstance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">testAddon<span class="token punctuation">.</span>ClassExample</span><span class="token punctuation">(</span><span class="token number">4.3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Initial value : '</span><span class="token punctuation">,</span> prevInstance<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'After adding 3.3 : '</span><span class="token punctuation">,</span> prevInstance<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3.3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> newFromExisting <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">testAddon<span class="token punctuation">.</span>ClassExample</span><span class="token punctuation">(</span>prevInstance<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Testing class initial value for derived instance'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newFromExisting<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </code></pre></div>
<p>Here, we have an instance of <code class="language-text">ClassExample</code> in <code class="language-text">prevInstance</code>.</p>
<p>And we want a new instance <code class="language-text">newFromExisting</code> which has same value of <code class="language-text">prevInstance</code>. For that, we want to pass the existing instance <code class="language-text">prevInstance</code> to the constructor of <code class="language-text">ClassExample </code>. Since, <code class="language-text">prevInstance</code> is not a primitive value like int, double etc. The expected output of the last <code class="language-text">console.log</code> should be <code class="language-text">7.6</code> .
Lets see how we can do that:</p>
<div class="gatsby-highlight" data-language="diff"><pre class="language-diff"><code class="language-diff">diff --git a/cppsrc/Samples/classexample.cpp b/cppsrc/Samples/classexample.cpp
index 8dfa3cc..834f7ea 100644
<span class="token coord">--- a/cppsrc/Samples/classexample.cpp</span>
<span class="token coord">+++ b/cppsrc/Samples/classexample.cpp</span>
@@ -22,8 +22,17 @@ ClassExample::ClassExample(const Napi::CallbackInfo&amp; info) : Napi::ObjectWrap&lt;Cl
<span class="token unchanged"><span class="token prefix unchanged"> </span>  Napi::HandleScope scope(env);
<span class="token prefix unchanged"> </span>
<span class="token prefix unchanged"> </span>  int length = info.Length();
</span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>  if (length != 1 || !info[0].IsNumber()) {
<span class="token prefix deleted">-</span>    Napi::TypeError::New(env, "Number expected").ThrowAsJavaScriptException();
</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>  
<span class="token prefix inserted">+</span>  if (length != 1) {
<span class="token prefix inserted">+</span>    Napi::TypeError::New(env, "Only one argument expected").ThrowAsJavaScriptException();
<span class="token prefix inserted">+</span>  }
<span class="token prefix inserted">+</span>
<span class="token prefix inserted">+</span>  if(!info[0].IsNumber()){
<span class="token prefix inserted">+</span>    Napi::Object object_parent = info[0].As&lt;Napi::Object>();
<span class="token prefix inserted">+</span>    ClassExample* example_parent = Napi::ObjectWrap&lt;ClassExample>::Unwrap(object_parent);
<span class="token prefix inserted">+</span>    ActualClass* parent_actual_class_instance = example_parent->GetInternalInstance();
<span class="token prefix inserted">+</span>    this->actualClass_ = new ActualClass(parent_actual_class_instance->getValue());
<span class="token prefix inserted">+</span>    return;
</span><span class="token unchanged"><span class="token prefix unchanged"> </span>  }
<span class="token prefix unchanged"> </span>
<span class="token prefix unchanged"> </span>  Napi::Number value = info[0].As&lt;Napi::Number>();
</span>@@ -51,4 +60,8 @@ Napi::Value ClassExample::Add(const Napi::CallbackInfo&amp; info) {
<span class="token unchanged"><span class="token prefix unchanged"> </span>  double answer = this->actualClass_->add(toAdd.DoubleValue());
<span class="token prefix unchanged"> </span>
<span class="token prefix unchanged"> </span>  return Napi::Number::New(info.Env(), answer);
</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>}
<span class="token prefix inserted">+</span>
<span class="token prefix inserted">+</span>ActualClass* ClassExample::GetInternalInstance() {
<span class="token prefix inserted">+</span>  return this->actualClass_;
</span><span class="token unchanged"><span class="token prefix unchanged"> </span>}
</span>



diff --git a/cppsrc/Samples/classexample.h b/cppsrc/Samples/classexample.h
index 1f0cf69..7f6237f 100644
<span class="token coord">--- a/cppsrc/Samples/classexample.h</span>
<span class="token coord">+++ b/cppsrc/Samples/classexample.h</span>
@@ -5,6 +5,7 @@ class ClassExample : public Napi::ObjectWrap&lt;ClassExample> {
<span class="token unchanged"><span class="token prefix unchanged"> </span> public:
<span class="token prefix unchanged"> </span>  static Napi::Object Init(Napi::Env env, Napi::Object exports);
<span class="token prefix unchanged"> </span>  ClassExample(const Napi::CallbackInfo&amp; info);
</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>  ActualClass* GetInternalInstance();
</span><span class="token unchanged"><span class="token prefix unchanged"> </span>
<span class="token prefix unchanged"> </span> private:
<span class="token prefix unchanged"> </span>  static Napi::FunctionReference constructor;
<span class="token prefix unchanged"> </span>  
<span class="token prefix unchanged"> </span>  
<span class="token prefix unchanged"> </span>  
</span>diff --git a/index.js b/index.js
index d849e0e..efce991 100644
<span class="token coord">--- a/index.js</span>
<span class="token coord">+++ b/index.js</span>
@@ -3,8 +3,13 @@ console.log('addon',testAddon);
<span class="token unchanged"><span class="token prefix unchanged"> </span>console.log('hello ', testAddon.hello());
<span class="token prefix unchanged"> </span>console.log('add ', testAddon.add(5, 10));
<span class="token prefix unchanged"> </span>
</span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>const prevInstance = new testAddon.ClassExample(4.3);
<span class="token prefix inserted">+</span>console.log('Initial value : ', prevInstance.getValue());
<span class="token prefix inserted">+</span>console.log('After adding 3.3 : ', prevInstance.add(3.3));
<span class="token prefix inserted">+</span>
<span class="token prefix inserted">+</span>const newFromExisting = new testAddon.ClassExample(prevInstance);
<span class="token prefix inserted">+</span>
<span class="token prefix inserted">+</span>console.log('Testing class initial value for derived instance');
<span class="token prefix inserted">+</span>console.log(newFromExisting.getValue());
</span><span class="token unchanged"><span class="token prefix unchanged"> </span>
</span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>const classInstance = new testAddon.ClassExample(4.3);
<span class="token prefix deleted">-</span>console.log('Testing class initial value : ',classInstance.getValue());
<span class="token prefix deleted">-</span>console.log('After adding 3.3 : ',classInstance.add(3.3));
</span><span class="token unchanged"><span class="token prefix unchanged"> </span>module.exports = testAddon;</span></code></pre></div>
<p>In the above changes.</p>
<ol>
<li>First thing we did is change the implementation of <code class="language-text">ClassExample::ClassExample</code> so that it can take an argument which is not a number.</li>
<li>Now we assume that if the argument is not a number, it must be an instance of the ClassExample itself. So to get the class instance from the JS side we need to UnWrap the object.</li>
</ol>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp">Napi<span class="token double-colon punctuation">::</span>Object object_parent <span class="token operator">=</span> info<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token generic-function"><span class="token function">As</span><span class="token generic class-name"><span class="token operator">&lt;</span>Napi<span class="token double-colon punctuation">::</span>Object<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ClassExample<span class="token operator">*</span> example_parent <span class="token operator">=</span> Napi<span class="token double-colon punctuation">::</span><span class="token class-name">ObjectWrap</span><span class="token operator">&lt;</span>ClassExample<span class="token operator">></span><span class="token double-colon punctuation">::</span><span class="token function">Unwrap</span><span class="token punctuation">(</span>object_parent<span class="token punctuation">)</span><span class="token punctuation">;</span>

ActualClass<span class="token operator">*</span> parent_actual_class_instance <span class="token operator">=</span> example_parent<span class="token operator">-></span><span class="token function">GetInternalInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">this</span><span class="token operator">-></span>actualClass_ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ActualClass</span><span class="token punctuation">(</span>parent_actual_class_instance<span class="token operator">-></span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">return</span><span class="token punctuation">;</span></code></pre></div>
<p>So we Unwrap the object using the <code class="language-text">unwrap</code> method and then to get to the <code class="language-text">actualClass</code> instance of in the <code class="language-text">ClassExample</code> we defined an additional method called <code class="language-text">GetInternalInstance</code> which simply returns the internal <code class="language-text">actualClass</code> reference. Finally, we take the value from <code class="language-text">actualClass</code> instance and create new <code class="language-text">actualClass</code> instance for the new <code class="language-text">ClassExample</code> instance.</p>
<p>Lets again run it!</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">npm run build
node index.js</code></pre></div>
<p><strong>Output:</strong></p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">node index.js
Initial value :  4.3
After adding 3.3 :  7.6
Testing class initial value for derived instance
7.6</code></pre></div>
<p>Crazy 🤯 🎉 We got the expected <code class="language-text">7.6</code> Wohoo !! 🌮</p>
<hr>
<p>The entire source code is available at : <a href="https://github.com/master-atul/blog-addons-example">https://github.com/master-atul/blog-addons-example</a></p>
<p>I hope this helps someone trying to use N-API and create C++/C addons for NodeJS. 🌮</p>
<h2 id="references" style="position:relative;"><a href="#references" aria-label="references permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>References:</h2>
<ul>
<li><a href="https://github.com/nodejs/abi-stable-node-addon-examples/">https://github.com/nodejs/abi-stable-node-addon-examples/</a></li>
<li><a href="https://github.com/nodejs/node-addon-api.git/">https://github.com/nodejs/node-addon-api.git/</a></li>
<li><a href="https://nodejs.org/api/addons.html">https://nodejs.org/api/addons.html</a></li>
</ul></article></section><aside class="right-side-area"><div class="side-area-wrapper"><aside style="display:flex;flex-direction:column;align-items:center;justify-content:center;padding-bottom:1.625rem"><div style="display:inline-block;position:relative;text-align:center"><a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet?text=🤖 Beginners guide to writing NodeJS Addons using C++ and N-API (node-addon-api)&amp;url=https%3A%2F%2Fblog.atulr.com%2Fnode-addon-guide" target="_blank" rel="noopener noreferrer" aria-label=""><div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z"></path></svg></div></div></a><a class="resp-sharing-button__link" href="https://news.ycombinator.com/submitlink?u=https://blog.atulr.com/node-addon-guide&amp;t=🤖 Beginners guide to writing NodeJS Addons using C++ and N-API (node-addon-api)" target="_blank" rel="noopener noreferrer" aria-label=""><div class="resp-sharing-button resp-sharing-button--hackernews resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 140 140"><path fill-rule="evenodd" d="M60.94 82.314L17 0h20.08l25.85 52.093c.397.927.86 1.888 1.39 2.883.53.994.995 2.02 1.393 3.08.265.4.463.764.596 1.095.13.334.262.63.395.898.662 1.325 1.26 2.618 1.79 3.877.53 1.26.993 2.42 1.39 3.48 1.06-2.254 2.22-4.673 3.48-7.258 1.26-2.585 2.552-5.27 3.877-8.052L103.49 0h18.69L77.84 83.308v53.087h-16.9v-54.08z"></path></svg></div></div></a></div><div style="text-align:center;display:inline-box;font-size:small;font-weight:bold;color:#007acc">Share this post 🚀</div></aside><a href="https://revolut.me/atul" target="_blank" rel="noopener noreferrer" style="display:flex;justify-content:center;flex-direction:column;align-items:center"><img class="coffee" src="/static/coffee-e208eb2ebad601320fbcf3302080dc8f.svg" alt="coffee"/><div style="text-align:center;font-size:small;font-weight:bold;margin-top:-0.8125rem">Buy me coffee </div></a></div></aside></main><footer class="page-spacing"><div style="align-self:center;display:flex;padding:20px 30px;flex-direction:column;justify-content:space-around;max-width:400px;border:2px solid #000;border-radius:5px;margin:0 auto;background:#fff"><strong style="margin:0;padding-bottom:10px;font-size:1.1rem">💌 Learn with me 🚀</strong><p style="margin:0;padding-bottom:10px;font-size:0.9rem">I spend a lot of time learning and thinking about building better software. Subscribe and I&#x27;ll drop a mail when I share something new.</p><form style="display:flex;margin:0"><input type="email" style="width:100%;padding:5px;font-size:0.9rem;font-weight:bold;border-radius:5px;border:1px solid black" placeholder="your@email.com" value=""/><input type="submit" id="subscribe-button" value="Subscribe" disabled=""/></form><p style="margin:0;padding-top:10px;font-size:0.9rem;font-style:italic">No spam. Promise 🙏</p></div><br/><br/><div id="disqus_thread"></div><section style="display:flex;flex-direction:row;padding-top:0.54167rem"><img src="https://avatars2.githubusercontent.com/u/4029423?s=200" alt="Atul R" style="width:3.25rem;height:3.25rem;margin-right:1.625rem"/><p style="text-align:justify">Written by<strong> <a href="https://www.atulr.com" target="_blank" rel="noopener noreferrer">Atul R</a></strong> <!-- -->a developer 🖥,<!-- --> <a href="https://www.reactnative.guide" target="_blank" rel="noopener noreferrer">author</a> <!-- -->📖 and trainer 👨🏽‍🎓. He primarily works on Javascript ecosystem and occasionally hacks around in C++, Rust and Python. He is an<!-- --> <a href="https://github.com/a7ul" target="_blank" rel="noopener noreferrer">open source</a> <!-- -->enthusiast and <span style="color:red">❤</span> making useful tools for humans.<!-- --> <a href="https://twitter.com/a7ulr" target="_blank" rel="noopener noreferrer">You should follow him on Twitter<!-- --> </a></p></section></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-65870043-2', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/node-addon-guide/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-634a43ecbe86379c7554.js"],"app":["/app-92a7b3feff722d6b21c6.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-644cf44b673b62dc3cc0.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-bcc4f06fac586e3ebde7.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-716c3dc14c447a940589.js"],"component---src-pages-markdown-remark-frontmatter-slug-tsx":["/component---src-pages-markdown-remark-frontmatter-slug-tsx-7b6dee07d0714d7fe9f5.js"]};/*]]>*/</script><script src="/polyfill-634a43ecbe86379c7554.js" nomodule=""></script><script src="/component---src-pages-markdown-remark-frontmatter-slug-tsx-7b6dee07d0714d7fe9f5.js" async=""></script><script src="/a11e6048128043ecce21cf58c6d16eea726089af-270590b51b40f21e7c38.js" async=""></script><script src="/app-92a7b3feff722d6b21c6.js" async=""></script><script src="/framework-d28b9578a91159581937.js" async=""></script><script src="/webpack-runtime-0388364b030d207dc5cf.js" async=""></script></body></html>