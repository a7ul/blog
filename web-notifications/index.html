<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.625 -apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}h1{margin-left:0;margin-right:0;margin-top:2.4375rem;padding-bottom:calc(0.40625rem - 1px);padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.21875rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;border-bottom:1px solid hsla(0,0%,0%,0.07);}h2{margin-left:0;margin-right:0;margin-top:1.625rem;padding-bottom:calc(0.40625rem - 1px);padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.40625rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;border-bottom:1px solid hsla(0,0%,0%,0.07);}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:hsla(0,0%,0%,0.53);font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}ul{margin-left:1.625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;font-size:0.85rem;line-height:1.625rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;font-size:1rem;line-height:1.625rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}blockquote{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:calc(0.8125rem - 1px);padding-right:0;padding-top:0;margin-bottom:0.8125rem;border-left:4px solid hsla(0,0%,0%,0.13);color:hsla(0,0%,0%,0.53);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(0.8125rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}b{font-weight:600;}strong{font-weight:600;}dt{font-weight:600;}th{font-weight:600;}li{margin-bottom:calc(0.8125rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.625rem;margin-bottom:calc(0.8125rem / 2);margin-top:calc(0.8125rem / 2);}li > ul{margin-left:1.625rem;margin-bottom:calc(0.8125rem / 2);margin-top:calc(0.8125rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(0.8125rem / 2);}code{font-size:0.85rem;line-height:1.625rem;}kbd{font-size:0.85rem;line-height:1.625rem;}samp{font-size:0.85rem;line-height:1.625rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.08333rem;padding-right:1.08333rem;padding-top:0.8125rem;padding-bottom:calc(0.8125rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}h3,h4,h5,h6{margin-bottom:0.8125rem;margin-top:1.625rem;}ol,ul{margin-left:2.03125rem;}li>ol,li>ul{margin-left:2.03125rem;}a{color:#4078c0;text-decoration:none;}a:hover,a:active{text-decoration:underline;}a.gatsby-resp-image-link{box-shadow:none;}</style><style data-href="/styles.0b6a89a6250e9a4223fb.css" data-identity="gatsby-global-css">.notfound-container{align-items:center;display:flex;flex-direction:column;justify-content:center}.notfound-video-frame{border-radius:15px}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-8d7d79679b70dbe27172b6460e7a7910.woff2) format("woff2"),url(/static/montserrat-latin-100-ec38980a9e0119a379e2a9b3dbb1901a.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-e279051046ba1286706adc886cf1c96b.woff2) format("woff2"),url(/static/montserrat-latin-100italic-3b325a3173c8207435cd1b76e19bf501.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-9d266fbbfa6cab7009bd56003b1eeb67.woff2) format("woff2"),url(/static/montserrat-latin-200-2d8ba08717110d27122e54c34b8a5798.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-6e5b3756583bb2263eb062eae992735e.woff2) format("woff2"),url(/static/montserrat-latin-200italic-a0d6f343e4b536c582926255367a57da.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-00b3e893aab5a8fd632d6342eb72551a.woff2) format("woff2"),url(/static/montserrat-latin-300-ea303695ceab35f17e7d062f30e0173b.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-56f34ea368f6aedf89583d444bbcb227.woff2) format("woff2"),url(/static/montserrat-latin-300italic-54b0bf2c8c4c12ffafd803be2466a790.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-b71748ae4f80ec8c014def4c5fa8688b.woff2) format("woff2"),url(/static/montserrat-latin-400-0659a9f4e90db5cf51b50d005bff1e41.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-6eed6b4cbb809c6efc7aa7ddad6dbe3e.woff2) format("woff2"),url(/static/montserrat-latin-400italic-7583622cfde30ae49086d18447ab28e7.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-091b209546e16313fd4f4fc36090c757.woff2) format("woff2"),url(/static/montserrat-latin-500-edd311588712a96bbf435fad264fff62.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-c90ced68b46050061d1a41842d6dfb43.woff2) format("woff2"),url(/static/montserrat-latin-500italic-5146cbfe02b1deea5dffea27a5f2f998.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-0480d2f8a71f38db8633b84d8722e0c2.woff2) format("woff2"),url(/static/montserrat-latin-600-b77863a375260a05dd13f86a1cee598f.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-cf46ffb11f3a60d7df0567f8851a1d00.woff2) format("woff2"),url(/static/montserrat-latin-600italic-c4fcfeeb057724724097167e57bd7801.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-7dbcc8a5ea2289d83f657c25b4be6193.woff2) format("woff2"),url(/static/montserrat-latin-700-99271a835e1cae8c76ef8bba99a8cc4e.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-c41ad6bdb4bd504a843d546d0a47958d.woff2) format("woff2"),url(/static/montserrat-latin-700italic-6779372f04095051c62ed36bc1dcc142.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-db9a3e0ba7eaea32e5f55328ace6cf23.woff2) format("woff2"),url(/static/montserrat-latin-800-4e3c615967a2360f5db87d2f0fd2456f.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-bf45bfa14805969eda318973947bc42b.woff2) format("woff2"),url(/static/montserrat-latin-800italic-fe82abb0bcede51bf724254878e0c374.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-e66c7edc609e24bacbb705175669d814.woff2) format("woff2"),url(/static/montserrat-latin-900-8211f418baeb8ec880b80ba3c682f957.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-4454c775e48152c1a72510ceed3603e2.woff2) format("woff2"),url(/static/montserrat-latin-900italic-efcaa0f6a82ee0640b83a0916e6e8d68.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-fc117160c69a8ea0851b26dd14748ee4.woff2) format("woff2"),url(/static/merriweather-latin-300-58b18067ebbd21fda77b67e73c241d3b.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-fe29961474f8dbf77c0aa7b9a629e4bc.woff2) format("woff2"),url(/static/merriweather-latin-300italic-23c3f1f88683618a4fb8d265d33d383a.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-d9479e8023bef9cbd9bf8d6eabd6bf36.woff2) format("woff2"),url(/static/merriweather-latin-400-040426f99ff6e00b86506452e0d1f10b.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-2de7bfeaf08fb03d4315d49947f062f7.woff2) format("woff2"),url(/static/merriweather-latin-400italic-79db67aca65f5285964ab332bd65f451.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-4b08e01d805fa35d7bf777f1b24314ae.woff2) format("woff2"),url(/static/merriweather-latin-700-22fb8afba4ab1f093b6ef9e28a9b6e92.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-cd92541b177652fffb6e3b952f1c33f1.woff2) format("woff2"),url(/static/merriweather-latin-700italic-f87f3d87cea0dd0979bfc8ac9ea90243.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-f813fc6a4bee46eda5224ac7ebf1b7be.woff2) format("woff2"),url(/static/merriweather-latin-900-5d4e42cb44410674acd99153d57df032.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-b7901d85486871c1779c0e93ddd85656.woff2) format("woff2"),url(/static/merriweather-latin-900italic-9647f9fdab98756989a8a5550eb205c3.woff) format("woff")}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#f8f8f2;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;text-align:left;text-shadow:0 1px rgba(0,0,0,.3);white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{border-radius:.3em;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#8292a2}.token.punctuation{color:#f8f8f2}.token.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.resp-sharing-button__icon{display:inline-block}.resp-sharing-button__link{color:#fff;display:inline-block;margin:.5em;text-decoration:none}.resp-sharing-button{border-radius:5px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;padding:.5em .75em;transition:25ms ease-out}.resp-sharing-button__icon svg{height:1em;margin-right:.4em;vertical-align:top;width:1em}.resp-sharing-button--small svg{margin:0;vertical-align:middle}.resp-sharing-button__icon{stroke:#fff;fill:none}.resp-sharing-button__icon--solid,.resp-sharing-button__icon--solidcircle{fill:#fff;stroke:none}.resp-sharing-button--twitter:hover{background-color:#2795e9}.resp-sharing-button--hackernews{background-color:#f60}.resp-sharing-button--hackernews:focus,.resp-sharing-button--hackernews:hover{background-color:#ce5206}.resp-sharing-button--facebook{background-color:#3b5998;border-color:#3b5998}.resp-sharing-button--facebook:active,.resp-sharing-button--facebook:hover{background-color:#2d4373;border-color:#2d4373}.resp-sharing-button--twitter{background-color:#55acee;border-color:#55acee}.resp-sharing-button--twitter:active,.resp-sharing-button--twitter:hover{background-color:#2795e9;border-color:#2795e9}.resp-sharing-button--whatsapp{background-color:#25d366;border-color:#25d366}.resp-sharing-button--whatsapp:active,.resp-sharing-button--whatsapp:hover{background-color:#1da851;border-color:#1da851}.toc-container{border-radius:5px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;margin:0 auto 20px;padding:.5em .75em;transition:25ms ease-out}.toc-header{margin-top:0}.page-spacing{margin:0 auto;max-width:56.875rem;min-width:0}.main-area{display:flex;flex-direction:row;justify-content:center}.left-side-area,.right-side-area{margin-top:0;padding-top:0}.left-side-area .side-area-wrapper,.right-side-area .side-area-wrapper{max-width:200px;min-width:200px;position:sticky;top:20px}@media (max-width:1024px){.left-side-area,.right-side-area{display:none}}.coffee{margin-bottom:15px;margin-top:10px;transition:50ms;width:50px}.coffee:hover{-webkit-transform:translateY(-5px);transform:translateY(-5px)}</style><meta name="generator" content="Gatsby 3.9.1"/><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>            
              (adsbygoogle = window.adsbygoogle || []).push({
                google_ad_client: "ca-pub-7851801517117579",
                enable_page_level_ads: true
              });
          </script><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><title data-react-helmet="true">ðŸš€ðŸ”” Beginners guide to Web Push Notifications using Service Workers | Blog</title><meta data-react-helmet="true" name="description" content="Push notifications are very common in the native mobile application platforms like Android &amp; iOS.
The are most effective ways to re-engage users to your apps. In this post we will look at how to implement push notifications for the webâ€¦"/><meta data-react-helmet="true" name="image" content=""/><meta data-react-helmet="true" name="keywords" content="web, push, notification, service workers"/><meta data-react-helmet="true" property="og:url" content="https://blog.atulr.comweb-notifications"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="ðŸš€ðŸ”” Beginners guide to Web Push Notifications using Service Workers"/><meta data-react-helmet="true" property="og:description" content="Push notifications are very common in the native mobile application platforms like Android &amp; iOS.
The are most effective ways to re-engage users to your apps. In this post we will look at how to implement push notifications for the webâ€¦"/><meta data-react-helmet="true" property="og:image" content=""/><meta data-react-helmet="true" property="fb:app_id" content=""/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content="@a7ulr"/><meta data-react-helmet="true" name="twitter:title" content="ðŸš€ðŸ”” Beginners guide to Web Push Notifications using Service Workers"/><meta data-react-helmet="true" name="twitter:description" content="Push notifications are very common in the native mobile application platforms like Android &amp; iOS.
The are most effective ways to re-engage users to your apps. In this post we will look at how to implement push notifications for the webâ€¦"/><meta data-react-helmet="true" name="twitter:image" content=""/><link rel="alternate" type="application/rss+xml" title="Atul&#x27;s RSS Feed" href="/rss.xml"/><link as="script" rel="preload" href="/webpack-runtime-3f5aba560311897579d7.js"/><link as="script" rel="preload" href="/framework-7579de6891c526166fb8.js"/><link as="script" rel="preload" href="/app-385c1031323534e3d9be.js"/><link as="script" rel="preload" href="/a11e6048128043ecce21cf58c6d16eea726089af-705f5c0b38d098cc0302.js"/><link as="script" rel="preload" href="/component---src-pages-markdown-remark-frontmatter-slug-tsx-fa129a45e5c9df4ab1f7.js"/><link as="fetch" rel="preload" href="/page-data/web-notifications/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div style="padding:2.4375rem 1.625rem;padding-top:3px"><header class="page-spacing" style="display:flex;flex-direction:row;justify-content:space-between"><div style="display:inline-block"><a style="padding:0;box-shadow:none" href="/"><img style="display:inline-block;width:4.0625rem;margin:0" src="data:image/png;base64,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" alt="atulr.com/blog"/></a></div><div style="display:inline-block;right:0;padding-top:1.625rem"><a style="padding:0 5px;box-shadow:none" target="_blank" rel="noopener noreferrer" href="https://www.atulr.com"><img style="display:inline-block;width:1.625rem;margin:0" src="data:image/png;base64,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" alt="atulr.com"/></a><a style="padding:0 5px;box-shadow:none" target="_blank" rel="noopener noreferrer" href="https://twitter.com/a7ulr"><img style="display:inline-block;width:1.625rem;margin:0" src="data:image/svg+xml;base64,PHN2ZyBhcmlhLWxhYmVsbGVkYnk9InNpbXBsZWljb25zLXR3aXR0ZXItaWNvbiIgcm9sZT0iaW1nIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHRpdGxlIGlkPSJzaW1wbGVpY29ucy10d2l0dGVyLWljb24iPlR3aXR0ZXIgaWNvbjwvdGl0bGU+PHBhdGggZmlsbD0iIzE5QjVGRSIgZD0iTTIzLjk1NCA0LjU2OWMtLjg4NS4zODktMS44My42NTQtMi44MjUuNzc1IDEuMDE0LS42MTEgMS43OTQtMS41NzQgMi4xNjMtMi43MjMtLjk1MS41NTUtMi4wMDUuOTU5LTMuMTI3IDEuMTg0LS44OTYtLjk1OS0yLjE3My0xLjU1OS0zLjU5MS0xLjU1OS0yLjcxNyAwLTQuOTIgMi4yMDMtNC45MiA0LjkxNyAwIC4zOS4wNDUuNzY1LjEyNyAxLjEyNEM3LjY5MSA4LjA5NCA0LjA2NiA2LjEzIDEuNjQgMy4xNjFjLS40MjcuNzIyLS42NjYgMS41NjEtLjY2NiAyLjQ3NSAwIDEuNzEuODcgMy4yMTMgMi4xODggNC4wOTYtLjgwNy0uMDI2LTEuNTY2LS4yNDgtMi4yMjgtLjYxNnYuMDYxYzAgMi4zODUgMS42OTMgNC4zNzQgMy45NDYgNC44MjctLjQxMy4xMTEtLjg0OS4xNzEtMS4yOTYuMTcxLS4zMTQgMC0uNjE1LS4wMy0uOTE2LS4wODYuNjMxIDEuOTUzIDIuNDQ1IDMuMzc3IDQuNjA0IDMuNDE3LTEuNjggMS4zMTktMy44MDkgMi4xMDUtNi4xMDIgMi4xMDUtLjM5IDAtLjc3OS0uMDIzLTEuMTctLjA2NyAyLjE4OSAxLjM5NCA0Ljc2OCAyLjIwOSA3LjU1NyAyLjIwOSA5LjA1NCAwIDEzLjk5OS03LjQ5NiAxMy45OTktMTMuOTg2IDAtLjIwOSAwLS40Mi0uMDE1LS42My45NjEtLjY4OSAxLjgtMS41NiAyLjQ2LTIuNTQ4bC0uMDQ3LS4wMnoiLz48L3N2Zz4=" alt="twitter"/></a><a style="padding:0 5px;box-shadow:none" target="_blank" rel="noopener noreferrer" href="https://github.com/a7ul/"><img style="display:inline-block;width:1.625rem;margin:0" src="data:image/svg+xml;base64,PHN2ZyBhcmlhLWxhYmVsbGVkYnk9InNpbXBsZWljb25zLWdpdGh1Yi1pY29uIiByb2xlPSJpbWciIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGUgaWQ9InNpbXBsZWljb25zLWdpdGh1Yi1pY29uIj5HaXRIdWIgaWNvbjwvdGl0bGU+PHBhdGggZD0iTTEyIC4yOTdjLTYuNjMgMC0xMiA1LjM3My0xMiAxMiAwIDUuMzAzIDMuNDM4IDkuOCA4LjIwNSAxMS4zODUuNi4xMTMuODItLjI1OC44Mi0uNTc3IDAtLjI4NS0uMDEtMS4wNC0uMDE1LTIuMDQtMy4zMzguNzI0LTQuMDQyLTEuNjEtNC4wNDItMS42MUM0LjQyMiAxOC4wNyAzLjYzMyAxNy43IDMuNjMzIDE3LjdjLTEuMDg3LS43NDQuMDg0LS43MjkuMDg0LS43MjkgMS4yMDUuMDg0IDEuODM4IDEuMjM2IDEuODM4IDEuMjM2IDEuMDcgMS44MzUgMi44MDkgMS4zMDUgMy40OTUuOTk4LjEwOC0uNzc2LjQxNy0xLjMwNS43Ni0xLjYwNS0yLjY2NS0uMy01LjQ2Ni0xLjMzMi01LjQ2Ni01LjkzIDAtMS4zMS40NjUtMi4zOCAxLjIzNS0zLjIyLS4xMzUtLjMwMy0uNTQtMS41MjMuMTA1LTMuMTc2IDAgMCAxLjAwNS0uMzIyIDMuMyAxLjIzLjk2LS4yNjcgMS45OC0uMzk5IDMtLjQwNSAxLjAyLjAwNiAyLjA0LjEzOCAzIC40MDUgMi4yOC0xLjU1MiAzLjI4NS0xLjIzIDMuMjg1LTEuMjMuNjQ1IDEuNjUzLjI0IDIuODczLjEyIDMuMTc2Ljc2NS44NCAxLjIzIDEuOTEgMS4yMyAzLjIyIDAgNC42MS0yLjgwNSA1LjYyNS01LjQ3NSA1LjkyLjQyLjM2LjgxIDEuMDk2LjgxIDIuMjIgMCAxLjYwNi0uMDE1IDIuODk2LS4wMTUgMy4yODYgMCAuMzE1LjIxLjY5LjgyNS41N0MyMC41NjUgMjIuMDkyIDI0IDE3LjU5MiAyNCAxMi4yOTdjMC02LjYyNy01LjM3My0xMi0xMi0xMiIvPjwvc3ZnPg==" alt="github"/></a><a style="padding:0 5px;box-shadow:none" target="_blank" rel="noopener noreferrer" href="https://linkedin.com/in/atulanand94"><img style="display:inline-block;width:1.625rem;margin:0" src="data:image/svg+xml;base64,PHN2ZyBhcmlhLWxhYmVsbGVkYnk9InNpbXBsZWljb25zLWxpbmtlZGluLWljb24iIHJvbGU9ImltZyIgdmlld0JveD0iMCAwIDI0IDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjx0aXRsZSBpZD0ic2ltcGxlaWNvbnMtbGlua2VkaW4taWNvbiI+TGlua2VkSW4gaWNvbjwvdGl0bGU+CjxwYXRoIGZpbGw9IiMwMDc3QjUiIGQ9Ik0yMC40NDcgMjAuNDUyaC0zLjU1NHYtNS41NjljMC0xLjMyOC0uMDI3LTMuMDM3LTEuODUyLTMuMDM3LTEuODUzIDAtMi4xMzYgMS40NDUtMi4xMzYgMi45Mzl2NS42NjdIOS4zNTFWOWgzLjQxNHYxLjU2MWguMDQ2Yy40NzctLjkgMS42MzctMS44NSAzLjM3LTEuODUgMy42MDEgMCA0LjI2NyAyLjM3IDQuMjY3IDUuNDU1djYuMjg2ek01LjMzNyA3LjQzM2MtMS4xNDQgMC0yLjA2My0uOTI2LTIuMDYzLTIuMDY1IDAtMS4xMzguOTItMi4wNjMgMi4wNjMtMi4wNjMgMS4xNCAwIDIuMDY0LjkyNSAyLjA2NCAyLjA2MyAwIDEuMTM5LS45MjUgMi4wNjUtMi4wNjQgMi4wNjV6bTEuNzgyIDEzLjAxOUgzLjU1NVY5aDMuNTY0djExLjQ1MnpNMjIuMjI1IDBIMS43NzFDLjc5MiAwIDAgLjc3NCAwIDEuNzI5djIwLjU0MkMwIDIzLjIyNy43OTIgMjQgMS43NzEgMjRoMjAuNDUxQzIzLjIgMjQgMjQgMjMuMjI3IDI0IDIyLjI3MVYxLjcyOUMyNCAuNzc0IDIzLjIgMCAyMi4yMjIgMGguMDAzeiIvPjwvc3ZnPg==" alt="linkedin"/></a></div></header><hr class="page-spacing"/><header class="page-spacing"><h1 style="text-align:start;margin-bottom:5px">ðŸš€ðŸ”” Beginners guide to Web Push Notifications using Service Workers</h1></header><main class="main-area"><aside class="left-side-area"><div class="side-area-wrapper"><ol class="toc-container"><h4 class="toc-header">Table of contents</h4><li><a href="#overview">Overview</a></li><li><a href="#code">Code</a></li><li><a href="#step-0:-boilerplate">Step 0: Boilerplate</a></li><li><a href="#support">Support</a></li><li><a href="#step-1:-register-a-service-worker-and-get-permission-for-notification">Step 1: Register a Service Worker and Get Permission for Notification</a></li><li><a href="#step-2:-local-notification">Step 2: Local Notification</a></li><li><a href="#step-3:-push-notification">Step 3: Push Notification</a></li><li><a href="#caveats">Caveats</a></li><li><a href="#references">References</a></li></ol><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-7851801517117579" data-ad-slot="9312053399" data-ad-format="auto" data-full-width-responsive="true"></ins></div></aside><section class="page-spacing center-area"><p style="font-size:0.87055rem;line-height:1.625rem;display:block">September 25, 2018</p><article style="padding-bottom:1.625rem"><p>Push notifications are very common in the native mobile application platforms like Android &#x26; iOS.
The are most effective ways to re-engage users to your apps. In this post we will look at how to implement push notifications for the web.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; max-width:100% !important;"
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 35.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABq0lEQVQoz2NgQAKtblIMZfoMDOUmrGzLCnz4T22Yz7dvSRtfeW423/vLq/leX1nFt2z2Ur6FARr8r+a5sTyebsdwsdOJASdodBVnrrFgYaix4c7rirH4Oaej8tXUmuy38xvz304sy3i7vKfk7eHV3a/PTfL8vi1Z3nlTrATDrgJdJpwGBuvyMwdp8zIE6/BVhhkI//fTEv4/OUTr/7clIf97HWX+z441+P9knvf/u3M8/p9qtfY83WHLcGmCI24DbeR5mO0UeRnsFfnKTKW5/ntrCv6a6Cb790OX3d8zGdp/mxxk/q7L0P59p9/+/6elPu6fl/swvJzrjttACXZmZm4GBgZhVsZyJT62/2uidf7O91P532Al8X+Kk9R/Y2Hu/04aov9K3OX/t4eoeHSGqjA0BSjjNjAxJJA5PiyUwdXSrLQwMfr/+o6iHy0ZEb/jI8N+VybH/G7MSfzdWJr5Mz856n+AvZF7mJs1Q4yvE24Ds1OSGArzCxiiQ0MkMsMDzGIDPI34pdSM/bxcjGfkRxq3pgUYV6WGGPflh5qmuxvzZXlbMBQF26EYAgCyzpyT/lCRgAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="meme_push_one_doesnt"
        title="meme_push_one_doesnt"
        src="/static/f89436a6112cec0e8196e9335274024f/5a190/meme_one_doesnt.png"
        srcset="/static/f89436a6112cec0e8196e9335274024f/772e8/meme_one_doesnt.png 200w,
/static/f89436a6112cec0e8196e9335274024f/e17e5/meme_one_doesnt.png 400w,
/static/f89436a6112cec0e8196e9335274024f/5a190/meme_one_doesnt.png 800w,
/static/f89436a6112cec0e8196e9335274024f/c1b63/meme_one_doesnt.png 1200w,
/static/f89436a6112cec0e8196e9335274024f/3c492/meme_one_doesnt.png 1300w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<p>Notifications can be of two types:<br/></p>
<ol>
<li>Local Notification: This is generated by your app itself.</li>
<li>Push Notification: This is generated by a server via a push event.</li>
</ol>
<p>If you are here only for Push notifications, you can safely skip to <strong>Step 3: Push Notification</strong></p>
<h2 id="overview" style="position:relative;"><a href="#overview" aria-label="overview permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Overview</h2>
<p>Components needed for Push Notification:</p>
<ol>
<li><a href="https://developers.google.com/web/fundamentals/primers/service-workers/" target="_blank">Service Workers</a></li>
<li>Notification API: This API is used to show a notification prompt to the user just like in case of mobile devices.</li>
<li>Push API: This API is used to get the push message from the server.</li>
</ol>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; max-width:100% !important;"
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 55.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABh0lEQVQoz02SBwoCUQxE99jewnt4CkEUERXRtSF2Rdfeu0beQJYNfH5LJplJgt/vZ9j3+7XH42GFQsFqtZpWv9/X32w2s16vZ4vFwqbTqdXrdd09NmmBg+F4Op3sfD7LeTQa2WAwsOfzaZ/PRz6bzcYajYYS83673WwymWjhS7wAX6+Xsl+vVzsejwLb7Xa23W6VyC2dTlsqlYrv3W7XisWidTodC8NQTAIvm6ru97sASHC5XAS4Wq1iAKpfLpdKii9A0C+VSpKHGFXIJ9kcLGlUysL2+701m01RxjeKIknhifkX4OFwsPF4HDu4rhi6IQF6IctwONQ7zNrttlWrVatUKtqpPtYQyuwuge8AQQ0GVJrUlHO5XFajfCICD6JDUHEwB4RGPp9XF6E1n89jQO7QxWAhQEYCugRAz+kmATOZjGhxJrEbjIhPMlKX0Y6S6Z6ba4jxTlKC8eePOeTMG8vlEmVo0BjKz+VyEhttGAca0Wq1RI87i1HJZrOqeL1eK45mvd9v+wMdMz02LRMBjwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="push_overview"
        title="push_overview"
        src="/static/ba3a4918ca12c2970f84e6cb9b8f9d58/5a190/pushoverview.png"
        srcset="/static/ba3a4918ca12c2970f84e6cb9b8f9d58/772e8/pushoverview.png 200w,
/static/ba3a4918ca12c2970f84e6cb9b8f9d58/e17e5/pushoverview.png 400w,
/static/ba3a4918ca12c2970f84e6cb9b8f9d58/5a190/pushoverview.png 800w,
/static/ba3a4918ca12c2970f84e6cb9b8f9d58/6a6e9/pushoverview.png 826w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<p>The steps involved in making a local push notification: <br/></p>
<ol>
<li>Ask for permission from the user using the Notification APIs <strong>requestPermission</strong> method.</li>
<li>If permission granted :
<ul>
<li>Brilliant! Now we use our service worker to subscribe to a Push Service using Push API.</li>
<li>Our Service Worker now listens for push events.</li>
<li>On arrival of a push event, service worker awakens and uses the information from the push message to show a notification using notification API.</li>
</ul>
</li>
<li>If permission denied : There is nothing much you can do here. So make sure you handle this case in code as well.</li>
</ol>
<h2 id="code" style="position:relative;"><a href="#code" aria-label="code permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Code</h2>
<p>The entire code for this blog is available at <a href="https://github.com/a7ul/web-push-demo" target="_blank"><a href="https://github.com/a7ul/web-push-demo">https://github.com/a7ul/web-push-demo</a></a></p>
<h2 id="step-0-boilerplate" style="position:relative;"><a href="#step-0-boilerplate" aria-label="step 0 boilerplate permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 0: Boilerplate</h2>
<p>Lets create a basic web app (no frameworks).</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh"> mkdir frontend
 cd frontend
 git init
 touch index.html index.css index.js</code></pre></div>
<p>Now we have a basic project structure. Lets add some basic code.</p>
<p><strong>index.html</strong></p>
<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>IE=edge<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Push Demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>screen<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>Hello World<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre></div>
<p><strong>index.js</strong></p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'js is working'</span><span class="token punctuation">)</span></code></pre></div>
<p><strong>index.css</strong></p>
<div class="gatsby-highlight" data-language="css"><pre class="language-css"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> beige<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>To run this project locally, lets use a simple development server. I will be using <code class="language-text">http-server</code> npm module.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">npm install -g http-server</code></pre></div>
<p>Inside the frontend directory run</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">http-server</code></pre></div>
<p>Now open up <code class="language-text">http://127.0.0.1:8080/</code> on browser, you should get:
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; max-width:100% !important;"
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 45.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB5klEQVQoz4WSQU/UQBiG+wPRGBYiId79DR408WD8HyZ6MQRijAeNMVGQBQVZYDV0ut1d6nbKttsttp1upzCPaRdQT07yZGa++eaZ9zDWo4cPzPraS148f2Y21td4tbHG0yePube6TGtxgeXWbZZbt25YqllcYGlxvq97VldaZmWlxf27d4zliBOMqUwynXBRlcxmCt8fIcQJjmPjiBqBEFfrnkN3c4vD3V0Ouoe82/nIl/YOO90D0/78CWtr67XZ23vL0eEH026/QThtimLAbHaK1h5KBUTRhLOzM7Jc4Y9D3P6QeHpOcp6QqpwkSUyaZ/Vjxup03tNzt/G8r9j2Jr5/QFG4pKkgz20mExe3P6Dvungy4PvQxwkm/IxipnHMeZIQhiFxHGPbNpaUHS4uPIqij9bDZs4yhzzvkeeCNB0xjafNpfF4TCAlWfqLSmvyPG9qURShlEJKieV5+yg1T1SL/sh6ZJlNrgLKylBVFaXWqKKgLDX1qGtZljXiy8tLoihshOYqlbkWzpkLlZIYw/9G0xFFkbFGo2+U5cDUieqk/+I0Qq0r9GxGoXJ0WTbJrmnOtK4Tmvp3WEJsmzj+QRgemzDs8jdRdIyUJwxPPY5Ej3bnGDE4JQgkvu8j5Q1G+j77+3vmN5sAgd5Nzp5mAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="boilerplate_ready"
        title="boilerplate_ready"
        src="/static/4cde221479acd1c703411d7495170bac/5a190/push_demo_boilerplate.png"
        srcset="/static/4cde221479acd1c703411d7495170bac/772e8/push_demo_boilerplate.png 200w,
/static/4cde221479acd1c703411d7495170bac/e17e5/push_demo_boilerplate.png 400w,
/static/4cde221479acd1c703411d7495170bac/5a190/push_demo_boilerplate.png 800w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<h2 id="support" style="position:relative;"><a href="#support" aria-label="support permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Support</h2>
<p>To make push notifications work we need Browser <a href="https://developer.mozilla.org/en-US/docs/Web/API/Push_API" target="_blank">Push API</a> and <a href="https://developers.google.com/web/fundamentals/primers/service-workers/" target="_blank">Service Workers</a>.
Almost all browsers support Service Workers. Browser support for Push API is also <a href="https://caniuse.com/#search=push%20api">good</a>.
Except Safari <em>(Has custom implementation of Push API)</em>, all major browsers support it.
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; max-width:100% !important;"
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 38.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAACD0lEQVQoz0WPS08TYRiF58f4F1gYfwILNxoT3bkQdSUakya6UGMMAYloMURBtDERkXvbKEGgWqAjDYVe+aZDC21nOjO1N6alXMTkMUwCLk7OWZw873ukgiJTFCtUtRhVPeZ4Tf8v20zSsFKOn+ZKIcqukXBytRijaqQ4bBj4xoeRNGWJvBKikJYpKCE09ZejvLKCpspnkFM1rdQZzDlkJakXYxzWVL6Ov0WyN4ap5tcoF6JUtSh2SeWgkmPfzLBXUqgbcWwjQU2LsluMU9PjDvCkWy/GnW9PljR/C2anhpByyio5NUxGyGjqCoYSYj3hYWL5BiI1hS7CFLJhtrNr6CcLogFyQkYkZbZSy8TC38glVymlBf7RIaRKWaFpCvZ1ga0nwdxhMNLNeV8bAXWMQ1snvzBK2v0YK7ZIrZ6hYQpaxU1ahuCgqGDlI+jmGjNjA0gR9xM+e3vo//mc9wsvGVka4K63kwuTF/F8fIjwuJnruIS/7Rw/HtwkOtjDxGQ3b5b6GJzvxRPsx+W7R7v3Mq7Xt5GswBSflt08k5/iCri4OnedO987uRa8xZfeDjautLPRdZ/NV4/Ymn6HEZwhFpkmpPqRU15kxcdqyk8iv8jIyAukVmObP9UsVHJYxjrbWoj59AR9671silka8SANM0mrsUNrN8ueneWoluVvOcNxJcNxOcNRSYWmzvz0B/4Bnuga1zGR+roAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Push API support"
        title="Push API support"
        src="/static/f0ffc055ce3e9afcbb1a02a1f623a015/5a190/support_push_api.png"
        srcset="/static/f0ffc055ce3e9afcbb1a02a1f623a015/772e8/support_push_api.png 200w,
/static/f0ffc055ce3e9afcbb1a02a1f623a015/e17e5/support_push_api.png 400w,
/static/f0ffc055ce3e9afcbb1a02a1f623a015/5a190/support_push_api.png 800w,
/static/f0ffc055ce3e9afcbb1a02a1f623a015/c1b63/support_push_api.png 1200w,
/static/f0ffc055ce3e9afcbb1a02a1f623a015/3f20e/support_push_api.png 1275w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<p>Lets check support in our code. Change the contents of <strong>index.js</strong> to:<br/>
<strong>index.js</strong></p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">check</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token string">'serviceWorker'</span> <span class="token keyword">in</span> navigator<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'No Service Worker support!'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token string">'PushManager'</span> <span class="token keyword">in</span> window<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'No Push API Support!'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">main</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div>
<p>If the output in the browser console doesnâ€™t show any errors at this point, you are good to go.</p>
<h2 id="step-1-register-a-service-worker-and-get-permission-for-notification" style="position:relative;"><a href="#step-1-register-a-service-worker-and-get-permission-for-notification" aria-label="step 1 register a service worker and get permission for notification permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 1: Register a Service Worker and Get Permission for Notification</h2>
<p>To register a service worker that runs in background:<br/>
First we add a new js file <strong>service.js</strong> : This will contain all our service worker code that will run on a separate thread.</p>
<p><strong>service.js</strong></p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hello from service worker'</span><span class="token punctuation">)</span></code></pre></div>
<p>Now modify the frontend <strong>index.js</strong> to:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">check</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token punctuation">.</span>
    <span class="token operator">...</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

<span class="token comment">// I added a function that can be used to register a service worker.</span>
<span class="token keyword">const</span> <span class="token function-variable function">registerServiceWorker</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> swRegistration <span class="token operator">=</span> <span class="token keyword">await</span> navigator<span class="token punctuation">.</span>serviceWorker<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'service.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//notice the file name</span>
    <span class="token keyword">return</span> swRegistration<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">const</span> <span class="token function-variable function">main</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token comment">//notice I changed main to async function so that I can use await for registerServiceWorker</span>
    <span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> swRegistration <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">registerServiceWorker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Lets run and see:
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; max-width:100% !important;"
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 51.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABr0lEQVQoz62Ny27TQBSG53ERt1YJbdIdFbwEgodgA0gVK9JFFZVeEoJdYqfxvbbj8Xhm7JDGnh95XCRQYYHESJ/mXL9D3rx+pU7HYxyPPqnp5BIf3r/DyxeHGOz3cTDcw8HgPsPhHvoPH+DZ7lM87j3Bzs4j9Pb7eD7ogVjzCdLUUXG8QJIsIUSM2y1DXRd/ZdtwlKmDStwgqyJk1AMVIeQ6ARmN3qqLiyNMJx/V2fkRisKElHNwfgUhvv0ZfgVZ2XquaiktlNLSOQmCc2w2S1SVjfXaRtk275C/xPeQ805SzrXo5yxxnEsIsURRXOtfSAdSOijFElUbC6era9qeq/ttLu9mu7yDGIYBz/ORJAmiKILrekizHOa1B8sNEScr+L4PmjMEQYAgDJEkKVzXRZquQGkOxpiOwzACMU0DQRhoWSvlnIMWHDHjiChDRikE56jrGpRm8DxPi+M41rTHfL+rtUdIdBOrggtwIVTOGBgrtDSnFLeb71BNo2UtTdP8xna7BaUUeZ7rHaUUSLpaAYDCf3rk7PNpM/1q4PhkrL4YJhaLBWzb/mcsy8JsNsMPXInYgB7yED0AAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="register service worker"
        title="register service worker"
        src="/static/ab37ee1e40bdfbec42bb670120bfa83d/5a190/register_service_worker.png"
        srcset="/static/ab37ee1e40bdfbec42bb670120bfa83d/772e8/register_service_worker.png 200w,
/static/ab37ee1e40bdfbec42bb670120bfa83d/e17e5/register_service_worker.png 400w,
/static/ab37ee1e40bdfbec42bb670120bfa83d/5a190/register_service_worker.png 800w,
/static/ab37ee1e40bdfbec42bb670120bfa83d/d2c2a/register_service_worker.png 929w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<p>Since service workers are registered only once, If you refresh the app using browser refresh button you will not see <code class="language-text">Hello from service worker</code> again.</p>
<blockquote>
<p>You can call register() every time a page loads without concern; the browser will figure out if the service worker is already registered or not and handle it accordingly.</p>
</blockquote>
<p>As service workers are event oriented, if we need to do something useful with service workers we will need to listen to events inside it.</p>
<blockquote>
<p>One subtlety with the register() method is the location of the service worker file. Youâ€™ll notice in this case that the service worker file is at the root of the domain. This means that the service workerâ€™s scope will be the entire origin. In other words, this service worker will receive fetch events for everything on this domain. If we register the service worker file at /example/sw.js, then the service worker would only see fetch events for pages whose URL starts with /example/ (i.e. /example/page1/, /example/page2/).</p>
</blockquote>
<p><strong>Debugging Tip for Service workers</strong> <br/></p>
<ul>
<li>
<p><strong>If you are using Chrome dev tools:</strong> You can go to <strong>Application Tab > Service Workers</strong>. Here you can unregister the service worker and refresh the app again. <br/>
For debugging purposes, I would suggest you enable <strong>update on reload</strong> checkbox on the top to avoid manual unregister every time you change the service worker file. More detailed guide <a href="https://developers.google.com/web/fundamentals/codelabs/debugging-service-workers/" target="_blank">here</a>.</p>
</li>
<li>
<p><strong>If you are using Firefox:</strong> On the Menu bar go to Tools > Web Developer > Service workers or type in the URL bar: <em>about:debugging#workers</em>.
This should show you list of all service workers.</p>
</li>
</ul>
<p><strong>Permission for Notification</strong></p>
<p>In order to show a web notification to the user, the web app needs to get permission from the user. <br/>
Modify the frontend <strong>index.js</strong> to:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token operator">...</span><span class="token punctuation">.</span>
<span class="token operator">...</span><span class="token punctuation">.</span>

<span class="token keyword">const</span> <span class="token function-variable function">registerServiceWorker</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
   <span class="token operator">...</span><span class="token punctuation">.</span>
   <span class="token operator">...</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">requestNotificationPermission</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> permission <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">.</span>Notification<span class="token punctuation">.</span><span class="token function">requestPermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// value of permission can be 'granted', 'default', 'denied'</span>
    <span class="token comment">// granted: user has accepted the request</span>
    <span class="token comment">// default: user has dismissed the notification permission popup by clicking on x</span>
    <span class="token comment">// denied: user has denied the request.</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>permission <span class="token operator">!==</span> <span class="token string">'granted'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Permission not granted for Notification'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">main</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> swRegistration <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">registerServiceWorker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> permission <span class="token operator">=</span>  <span class="token keyword">await</span> <span class="token function">requestNotificationPermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Lets refresh and see what happens.
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; max-width:100% !important;"
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 40.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA9ElEQVQoz43QwU7CQBSF4XlvJLS+gYm+iPEJ3KBsxbbKlFRgplDSzkw7Q8LqNwoYNkIXX+7m5N6TKyavL5S6ZLlY4LuWLEt4uL8jGg24jYfE0Q1xNCCOhkSj68S2Kii1RKkcrRVKrWjqmq5taZ3D+47gAyE07PfmKjEePzKZPDF9eyaXkixNeJ9OSdOExVeBViucNZhG4v0HXfd5kQghZ7fLadsCayzWGJy1VJsNWmm2VYVWJc4VeD/D+/wi4b0kBIlzkqZe/jLNiur4is16zrqcY+0h12vhyXn1nzYhzI6tZhwO53/zP6JP6KRPTpxfvqZPw296L0SUv+CaTgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="notification prompt"
        title="notification prompt"
        src="/static/129adc288a593a75f908f1ec2b00beed/5a190/notification_prompt.png"
        srcset="/static/129adc288a593a75f908f1ec2b00beed/772e8/notification_prompt.png 200w,
/static/129adc288a593a75f908f1ec2b00beed/e17e5/notification_prompt.png 400w,
/static/129adc288a593a75f908f1ec2b00beed/5a190/notification_prompt.png 800w,
/static/129adc288a593a75f908f1ec2b00beed/77800/notification_prompt.png 855w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<p><strong>Note:</strong>
We are asking for notification permission in the main function since this is a demo app. But ideally, we should not be doing it here as it accounts for bad UX. <a href="https://developers.google.com/web/fundamentals/push-notifications/permission-ux" target="_blank">More details on where you should be calling it in a production app here</a>.</p>
<p><em>An alternative approach here would be to add a button asking the user to subscribe to notifications and then on click of that button we show the notification prompt.</em></p>
<p>You can also get the value of permission via</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Notification<span class="token punctuation">.</span>permission<span class="token punctuation">)</span>
<span class="token comment">// This will output: granted, default or denied</span></code></pre></div>
<p>This can be used to hide the button if the user has already answered the notification prompt (if the value is <strong>not â€˜defaultâ€™</strong>).</p>
<h2 id="step-2-local-notification" style="position:relative;"><a href="#step-2-local-notification" aria-label="step 2 local notification permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 2: Local Notification</h2>
<p>Now that we have the permission from the user. We can go ahead and try out the notification popup.<br/>
To do that modify frontend <strong>index.js</strong></p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token operator">...</span><span class="token punctuation">.</span>
<span class="token operator">...</span><span class="token punctuation">.</span>

<span class="token keyword">const</span> <span class="token function-variable function">requestNotificationPermission</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
   <span class="token operator">...</span><span class="token punctuation">.</span>
   <span class="token operator">...</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">showLocalNotification</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">title<span class="token punctuation">,</span> body<span class="token punctuation">,</span> swRegistration</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
        body<span class="token punctuation">,</span>
        <span class="token comment">// here you can add more properties like icon, image, vibrate, etc.</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    swRegistration<span class="token punctuation">.</span><span class="token function">showNotification</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">main</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> swRegistration <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">registerServiceWorker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> permission <span class="token operator">=</span>  <span class="token keyword">await</span> <span class="token function">requestNotificationPermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">showLocalNotification</span><span class="token punctuation">(</span><span class="token string">'This is title'</span><span class="token punctuation">,</span> <span class="token string">'this is the message'</span><span class="token punctuation">,</span> swRegistration<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Possible values of Notification Option:</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json">const options = <span class="token punctuation">{</span>
  <span class="token property">"//"</span><span class="token operator">:</span> <span class="token string">"Visual Options"</span><span class="token punctuation">,</span>
  <span class="token property">"body"</span><span class="token operator">:</span> <span class="token string">"&lt;String>"</span><span class="token punctuation">,</span>
  <span class="token property">"icon"</span><span class="token operator">:</span> <span class="token string">"&lt;URL String>"</span><span class="token punctuation">,</span>
  <span class="token property">"image"</span><span class="token operator">:</span> <span class="token string">"&lt;URL String>"</span><span class="token punctuation">,</span>
  <span class="token property">"badge"</span><span class="token operator">:</span> <span class="token string">"&lt;URL String>"</span><span class="token punctuation">,</span>
  <span class="token property">"vibrate"</span><span class="token operator">:</span> <span class="token string">"&lt;Array of Integers>"</span><span class="token punctuation">,</span>
  <span class="token property">"sound"</span><span class="token operator">:</span> <span class="token string">"&lt;URL String>"</span><span class="token punctuation">,</span>
  <span class="token property">"dir"</span><span class="token operator">:</span> <span class="token string">"&lt;String of 'auto' | 'ltr' | 'rtl'>"</span><span class="token punctuation">,</span>

  <span class="token property">"//"</span><span class="token operator">:</span> <span class="token string">"Behavioural Options"</span><span class="token punctuation">,</span>
  <span class="token property">"tag"</span><span class="token operator">:</span> <span class="token string">"&lt;String>"</span><span class="token punctuation">,</span>
  <span class="token property">"data"</span><span class="token operator">:</span> <span class="token string">"&lt;Anything>"</span><span class="token punctuation">,</span>
  <span class="token property">"requireInteraction"</span><span class="token operator">:</span> <span class="token string">"&lt;boolean>"</span><span class="token punctuation">,</span>
  <span class="token property">"renotify"</span><span class="token operator">:</span> <span class="token string">"&lt;Boolean>"</span><span class="token punctuation">,</span>
  <span class="token property">"silent"</span><span class="token operator">:</span> <span class="token string">"&lt;Boolean>"</span><span class="token punctuation">,</span>

  <span class="token property">"//"</span><span class="token operator">:</span> <span class="token string">"Both Visual &amp; Behavioural Options"</span><span class="token punctuation">,</span>
  <span class="token property">"actions"</span><span class="token operator">:</span> <span class="token string">"&lt;Array of Strings>"</span><span class="token punctuation">,</span>

  <span class="token property">"//"</span><span class="token operator">:</span> <span class="token string">"Information Option. No visual affect."</span><span class="token punctuation">,</span>
  <span class="token property">"timestamp"</span><span class="token operator">:</span> <span class="token string">"&lt;Long>"</span>
<span class="token punctuation">}</span></code></pre></div>
<br/>
<a href="https://developer.mozilla.org/en-US/docs/Web/API/notification" target="_blank">Details of each and every property is listed here</a>
<h3 id="main-thread-and-service-worker-thread" style="position:relative;"><a href="#main-thread-and-service-worker-thread" aria-label="main thread and service worker thread permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Main thread and Service Worker thread</h3>
<p><strong>Main thread</strong>: The main JS thread that runs when we are browsing a web page with javascript.<br/>
<strong>Service Worker thread</strong>: This is an independent javascript thread which runs on the background and can run even when the page has been closed.</p>
<p>If you notice we havent used our service worker till now for any purpose other than just registering it. With respect to Push Notifications, the JS main thread should only be used for all UI related stuff like changing DOM elements or asking a user, the permissions for showing notifications. Notice here that I am displaying the notification from the main thread (index.js). Ideally we will not do this in the main thread. Keep in mind that notifications are only useful for re engaging the user back to your app (ie when the page is not open). If you show notification when the user is on your page, then the user actually gets distracted.</p>
<p>The worker thread(service worker) should be used for waiting for push messages/events and showing the notifications. This is because it is not necessary that the actual page whould be open on the browser at the time a push event arrives (meaning main js thread doesnt exist in this case).</p>
<p>Hence, In practical usecases we will call <strong>showNotification</strong> from the <strong>service.js</strong> file. We will do that when we implement remote notifications. Here I just wanted to show you how the <strong>showNotification</strong> call looks like.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; max-width:100% !important;"
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 36%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABzUlEQVQoz4XM20tTAQCA8fMfRDLn1CbOXXSMjrs4t52dbSwl0pViF2lJ0JsQVBAEvQT2EiQ002CB6NJJMHqoh0BhdCHaCRw9jJUrNzUqUgui2iZR0r5gRCAEPfz43j5huqWDW3orswaROdNe5swW7pjNTLRbGOwJcjzUTcjvpsfvptfvJiQ72S87OSVbSckNLAbqeR7UkNmn5mW3CiGmczGr7yRusBPXi8xoDSS0OiI6Hb2ddgZ8HvolJ4d9LgZkJ/1uOyGpg2FvO1m/llygkeVgPctdGpa61AiTTR6mdC5izQ7GjDauHzrC5LEwU+ETXJQkhttMnLa0ckZs46zYyjnRyHmriQs2I5fsekYcLVz2mIh5m8kG6hBuNkpEm9xE60SmDxzlzcZbNj5v8vHLJzJLGVKLKZS0Uu1faYWHyQUWHie5m7zPfPoZ85ER0q4ahDGNxPgeDxMqK7f7wmRfPOJV7gkrBYXtn++o/PrwT1TWqyrb74Eia/eiKI4ahFG1l0iDl2u7bcT7hiiWC2xtrVIur1AqFSiV8n+6U7GYr/r29TXfK+vkEuM8ddQiXFH5GNX4uLrLwczBkzuG5fLqf5WKeX6wSS5xgwdiLb8BOCF0TLb/hD8AAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="show_local_notification"
        title="show_local_notification"
        src="/static/c3c586f7aff3dcb3388d3e4ff6255525/5a190/show_local_notification.png"
        srcset="/static/c3c586f7aff3dcb3388d3e4ff6255525/772e8/show_local_notification.png 200w,
/static/c3c586f7aff3dcb3388d3e4ff6255525/e17e5/show_local_notification.png 400w,
/static/c3c586f7aff3dcb3388d3e4ff6255525/5a190/show_local_notification.png 800w,
/static/c3c586f7aff3dcb3388d3e4ff6255525/c1b63/show_local_notification.png 1200w,
/static/c3c586f7aff3dcb3388d3e4ff6255525/c9c44/show_local_notification.png 1245w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<h2 id="step-3-push-notification" style="position:relative;"><a href="#step-3-push-notification" aria-label="step 3 push notification permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 3: Push Notification</h2>
<h3 id="tldr" style="position:relative;"><a href="#tldr" aria-label="tldr permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TLDR</h3>
<ul>
<li>We subscribe our service worker to push events from the Push Service of browser.</li>
<li>We will send a message to the push service from our backend.</li>
<li>Push event from push service containing the message from our backend will arrive at the browser.</li>
<li>We use message from the push service to show the notification.</li>
</ul>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; max-width:100% !important;"
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABgklEQVQoz3WS20rDQBCG8yQ+i8/gU/gEIhQPIGLFR/BCBC9Fqhd6IVGp3vRCDbSlNtQQG4NJm+bUnJvkl91t03jIwDLLzM43/+4OBwB5nhdrYeXY73xeymPus7nnypAyqMoKKIHM4eUcRzaCIIDneRrMsqyAuq4Lx3EwnU7pnuRYIfOwLcBP4cU5FMOnIQoURRGtVuuHEsMwoGkakiRBFEUU6vv+Mu8Mcbu9CbtZR+NZxvrxK95UlwFN04QkSaypbVMY8WSlaUrVkVgQBIjjGJEXovslYuNmC762i8eujvqlCNOLGXA8HmMwGNDiyWRCi4kpigJVVWmeqCNqdV2H9DGE/d7D0dkFrl4ECKqDw+s+bCdgQMuyCkjZRqMRZFmm6klD0qywPo/9tVUc7NWwc/6ElVoDd8InA5Lu5HrLR///p1mcfBqQpwnC+xNkvSZ6QxunD314QQxucU3yjmEY/hmNqhmsMo6o63Q6aLfbxcdUDXUxyOwQ8nSGPEvpUM9SNm7fneb5kRMeUSsAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="overview push service"
        title="overview push service"
        src="/static/549964712aa048f22aaf630d40f3ad44/5a190/overview_push_service.png"
        srcset="/static/549964712aa048f22aaf630d40f3ad44/772e8/overview_push_service.png 200w,
/static/549964712aa048f22aaf630d40f3ad44/e17e5/overview_push_service.png 400w,
/static/549964712aa048f22aaf630d40f3ad44/5a190/overview_push_service.png 800w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<h3 id="so-what-is-a-push-service-" style="position:relative;"><a href="#so-what-is-a-push-service-" aria-label="so what is a push service  permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>So What is a Push Service ?</h3>
<blockquote>
<p>A push service receives a network request, validates it and delivers a push message to the appropriate browser. If the browser is offline, the message is queued until the the browser comes online.</p>
<p>Each browser can use any push service they want, itâ€™s something developers have no control over. This isnâ€™t a problem because every push service expects the same API call. Meaning you donâ€™t have to care who the push service is. You just need to make sure that your API call is valid.</p>
</blockquote>
<p>To know more: Read up <a href="https://developers.google.com/web/fundamentals/push-notifications/how-push-works#who_and_what_is_the_push_service" target="_blank">here</a></p>
<h3 id="before-we-proceed" style="position:relative;"><a href="#before-we-proceed" aria-label="before we proceed permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Before we proceed</h3>
<p>Lets clean up our code a bit as per recommendations above. Make sure our files look like this now:</p>
<p><strong>index.html</strong></p>
<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>IE=edge<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Push Demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>screen<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>Hello World<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>permission-btn<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>Ask Permission<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre></div>
<p><strong>index.js</strong></p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">check</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token string">'serviceWorker'</span> <span class="token keyword">in</span> navigator<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'No Service Worker support!'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token string">'PushManager'</span> <span class="token keyword">in</span> window<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'No Push API Support!'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">registerServiceWorker</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> swRegistration <span class="token operator">=</span> <span class="token keyword">await</span> navigator<span class="token punctuation">.</span>serviceWorker<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'service.js'</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> swRegistration
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">requestNotificationPermission</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> permission <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">.</span>Notification<span class="token punctuation">.</span><span class="token function">requestPermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// value of permission can be 'granted', 'default', 'denied'</span>
  <span class="token comment">// granted: user has accepted the request</span>
  <span class="token comment">// default: user has dismissed the notification permission popup by clicking on x</span>
  <span class="token comment">// denied: user has denied the request.</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>permission <span class="token operator">!==</span> <span class="token string">'granted'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Permission not granted for Notification'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">main</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> swRegistration <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">registerServiceWorker</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> permission <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">requestNotificationPermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// main(); we will not call main in the beginning.</span></code></pre></div>
<p><strong>service.js</strong></p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'activate'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// This will be called only once when the service worker is activated.</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'service worker activate'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>Lets run this: You should now see a button on the page saying â€˜Ask Permissionâ€™. Clicking on it would call our main function.</p>
<h3 id="listen-to-remote-notification" style="position:relative;"><a href="#listen-to-remote-notification" aria-label="listen to remote notification permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Listen to Remote Notification</h3>
<p>We will now only focus on the service worker file from now on unless specified otherwise. <br/>
To listen/subscribe to remote push messages we need the browser web app to register to the push service.</p>
<p><strong>service.js</strong></p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'activate'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// This will be called only once when the service worker is activated.</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">const</span> subscription <span class="token operator">=</span> <span class="token keyword">await</span> self<span class="token punctuation">.</span>registration<span class="token punctuation">.</span>pushManager<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>subscription<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Error'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>Now, unregister the service workers and refresh the web app. Click on Ask for permission button.</p>
<p><strong>In Firefox</strong> console you should see:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">{
  "endpoint":"https://updates.push.services.mozilla.com:443/wpush/v1/&lt;some_id>",
  "keys":{
    "auth":"&lt;some key>",
    "p256dh":"&lt;some key>"
  }
}</code></pre></div>
<p>The value of subscription will be <strong>null</strong> if the web app has not subscribed to the push service.</p>
<p><strong>In Chrome</strong> console you would see an error:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">Error DOMException: Registration failed - missing applicationServerKey, and gcm_sender_id not found in manifest</code></pre></div>
<p>This is because, there are two option parameters <strong>applicationServerKey</strong> (also known as <strong>VAPID public key</strong>) and <strong>userVisibleOnly</strong> which are optional in firefox but are required parameters in chrome.<br/></p>
<p><strong>userVisibleOnly</strong>: You need to send userVisibleOnly as <strong>true</strong> always in chrome. This parameter restricts the developer to use push messages for notifications. That is the developer will not be able use the push messages to send data to server silently without showing a notification. Currently it has to be set to true otherwise you get a permission denied error. In essence, silent push messages are not supported at the moment due to privacy and security concerns.</p>
<p><strong>VAPID</strong>: <em>Voluntary Application Server Identification for Web Push</em> is a spec that allows a backend server(your application server) to identify itself to the Push Service(browser specific service). It is a security measure that prevents anyone else from sending messages to an applicationâ€™s users.</p>
<h4 id="how-does-vapid-keys-enable-security-" style="position:relative;"><a href="#how-does-vapid-keys-enable-security-" aria-label="how does vapid keys enable security  permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How does VAPID keys enable security ?</h4>
<p>In short:</p>
<ol>
<li>You generate a set of private and public keys (VAPID keys) at the application server(for example:your backend NodeJS server).</li>
<li>Public key will be sent to the push service when the frontend app tries to subscribe to the push service. Now the push service knows the public key from your application server(backend). The subscribe method will return a unique endpoint for you frontend web app. You will store this unique endpoint at the backend application server.</li>
<li>From the application server, you will hit an API request to the unique push service endpoint that you just saved. In this API request you will sign some information in the Authorization header with the private key. This allows the push service to verify that the request came from the correct application server.</li>
<li>After validating the header, the push service will send the message to the frontend web app.</li>
</ol>
<p><em>PS: To get the value of push subscription you can also call (in your service worker file)</em></p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> subscription <span class="token operator">=</span> <span class="token keyword">await</span> self<span class="token punctuation">.</span>registration<span class="token punctuation">.</span>pushManager<span class="token punctuation">.</span><span class="token function">getSubscription</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div>
<p><strong>Generating VAPID Keys</strong></p>
<p>To generate a set of private and public VAPID keys:</p>
<ol>
<li>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">npm install -g web-push</code></pre></div>
</li>
<li>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">web-push generate-vapid-keys</code></pre></div>
</li>
</ol>
<p>This should print out something like this:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">=======================================

Public Key:
BJ5IxJBWdeqFDJTvrZ4wNRu7UY2XigDXjgiUBYEYVXDudxhEs0ReOJRBcBHsPYgZ5dyV8VjyqzbQKS8V7bUAglk

Private Key:
ERIZmc5T5uWGeRxedxu92k3HnpVwy_RCnQfgek1x2Y4

=======================================</code></pre></div>
<p><span style="color:red"><strong>DO NOT USE THE ABOVE KEYS, GENERATE YOUR OWN.</strong></span></p>
<p>You need to only generate this once. Keep your private key safe. Public key can be stored on frontend web app.</p>
<p>Now lets get back to <strong>service.js</strong></p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// urlB64ToUint8Array is a magic function that will encode the base64 public key</span>
<span class="token comment">// to Array buffer which is needed by the subscription option</span>
<span class="token keyword">const</span> <span class="token function-variable function">urlB64ToUint8Array</span> <span class="token operator">=</span> <span class="token parameter">base64String</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> padding <span class="token operator">=</span> <span class="token string">'='</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">-</span> <span class="token punctuation">(</span>base64String<span class="token punctuation">.</span>length <span class="token operator">%</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">4</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> base64 <span class="token operator">=</span> <span class="token punctuation">(</span>base64String <span class="token operator">+</span> padding<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\-</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'+'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">_</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'/'</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> rawData <span class="token operator">=</span> <span class="token function">atob</span><span class="token punctuation">(</span>base64<span class="token punctuation">)</span>
  <span class="token keyword">const</span> outputArray <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>rawData<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> rawData<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    outputArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> rawData<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> outputArray
<span class="token punctuation">}</span>

self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'activate'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// This will be called only once when the service worker is activated.</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> applicationServerKey <span class="token operator">=</span> <span class="token function">urlB64ToUint8Array</span><span class="token punctuation">(</span>
      <span class="token string">'BJ5IxJBWdeqFDJTvrZ4wNRu7UY2XigDXjgiUBYEYVXDudxhEs0ReOJRBcBHsPYgZ5dyV8VjyqzbQKS8V7bUAglk'</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span> applicationServerKey<span class="token punctuation">,</span> userVisibleOnly<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
    <span class="token keyword">const</span> subscription <span class="token operator">=</span> <span class="token keyword">await</span> self<span class="token punctuation">.</span>registration<span class="token punctuation">.</span>pushManager<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>subscription<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Error'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>Now refresh and unregister/re-register the service worker. Click on â€œAsk Permissionâ€. You should see in your console.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">{
  "endpoint" : "https://fcm.googleapis.com/fcm/send/&lt;some id>",
  "expirationTime" : null,
  "keys": {
    "p256dh" : "&lt;some key>",
    "auth" : "&lt;some key>"
  }
}</code></pre></div>
<p>This is quite similar to the one we received from the firefox subscription as well.
Notice that <strong>fcm.googleapis.com</strong> (firebase) is the push service used by google chrome while firefox uses <strong>updates.push.services.mozilla.com</strong> . The <a href="https://tools.ietf.org/html/draft-ietf-webpush-protocol" target="_blank">Web Push Protocol</a> standardises the Push API. This enables each browser to use the push service it deems fit as long as it conforms to the same API as mentioned in the spec.</p>
<p>Now once we receive the value of subscription, we need to save it in our backend server(application server). To do so we should create an API end point on our application server that will take in the subscription and store it in the database/cache. Lets for now consider that the API to hit is <strong>POST <a href="http://localhost:3000/save-subscription">http://localhost:3000/save-subscription</a></strong> with request body containing the entire subscription object. We will make this API on the backend server soon.</p>
<p>So lets change the <strong>service.js</strong> file to add functionality to save the subscription.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// urlB64ToUint8Array is a magic function that will encode the base64 public key</span>
<span class="token comment">// to Array buffer which is needed by the subscription option</span>
<span class="token keyword">const</span> <span class="token function-variable function">urlB64ToUint8Array</span> <span class="token operator">=</span> <span class="token parameter">base64String</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> padding <span class="token operator">=</span> <span class="token string">'='</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">-</span> <span class="token punctuation">(</span>base64String<span class="token punctuation">.</span>length <span class="token operator">%</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">4</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> base64 <span class="token operator">=</span> <span class="token punctuation">(</span>base64String <span class="token operator">+</span> padding<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\-</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'+'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">_</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'/'</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> rawData <span class="token operator">=</span> <span class="token function">atob</span><span class="token punctuation">(</span>base64<span class="token punctuation">)</span>
  <span class="token keyword">const</span> outputArray <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>rawData<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> rawData<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    outputArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> rawData<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> outputArray
<span class="token punctuation">}</span>

<span class="token comment">// saveSubscription saves the subscription to the backend</span>
<span class="token keyword">const</span> <span class="token function-variable function">saveSubscription</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token parameter">subscription</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token constant">SERVER_URL</span> <span class="token operator">=</span> <span class="token string">'http://localhost:4000/save-subscription'</span>
  <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token constant">SERVER_URL</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    method<span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
    headers<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    body<span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>subscription<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'activate'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// This will be called only once when the service worker is activated.</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> applicationServerKey <span class="token operator">=</span> <span class="token function">urlB64ToUint8Array</span><span class="token punctuation">(</span>
      <span class="token string">'BJ5IxJBWdeqFDJTvrZ4wNRu7UY2XigDXjgiUBYEYVXDudxhEs0ReOJRBcBHsPYgZ5dyV8VjyqzbQKS8V7bUAglk'</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span> applicationServerKey<span class="token punctuation">,</span> userVisibleOnly<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
    <span class="token keyword">const</span> subscription <span class="token operator">=</span> <span class="token keyword">await</span> self<span class="token punctuation">.</span>registration<span class="token punctuation">.</span>pushManager<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">saveSubscription</span><span class="token punctuation">(</span>subscription<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Error'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>Next step is to save subscription at the backend and then use the subscription to send push messages to the frontend app via the push service. But before that we will also need to listen to the push event from the backend on our frontend app.</p>
<p><strong>Listen to Push event</strong></p>
<p>In your <strong>service.js</strong> add</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'push'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Push event!! '</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Push event but no data'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<h4 id="time-for-backend-nodejs" style="position:relative;"><a href="#time-for-backend-nodejs" aria-label="time for backend nodejs permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Time for backend (NodeJS)</h4>
<p>Lets create a basic express js project.</p>
<ol>
<li>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">   mkdir backend
   cd backend
   npm init
   npm install --save express</code></pre></div>
</li>
<li>
<p>Now create a backend <strong>index.js</strong> file</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> cors <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cors'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> bodyParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'body-parser'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">cors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token number">4000</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello World!'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Example app listening on port </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div>
</li>
</ol>
<ol start="3">
<li>Run the node server as shown below and open up <code class="language-text">localhost:4000</code> on browser</li>
</ol>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">   node index.js</code></pre></div>
<p>You should see something like this: <br/><br/>
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; max-width:100% !important;"
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 33.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAASUlEQVQoz2P4+vXr/+8/fvx//+HD/ydPn/1//ebt/6/fvpONGd69e/f/z5+//1HAv3///5GJGRBmIAQpAQz/KHANXhdSCwx+AwGsAyrFe3pLeAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="backend_boilerplate_ready"
        title="backend_boilerplate_ready"
        src="/static/34108192ccfc049faeb58c3e837eccc1/5a190/backend-boilerplate.png"
        srcset="/static/34108192ccfc049faeb58c3e837eccc1/772e8/backend-boilerplate.png 200w,
/static/34108192ccfc049faeb58c3e837eccc1/e17e5/backend-boilerplate.png 400w,
/static/34108192ccfc049faeb58c3e837eccc1/5a190/backend-boilerplate.png 800w,
/static/34108192ccfc049faeb58c3e837eccc1/c1b63/backend-boilerplate.png 1200w,
/static/34108192ccfc049faeb58c3e837eccc1/29007/backend-boilerplate.png 1600w,
/static/34108192ccfc049faeb58c3e837eccc1/d544a/backend-boilerplate.png 1950w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<p><strong>Saving subscription on the backend</strong>
Lets create our save-subscription endpoint on the express server.
All we need to do is retrieve the subscription from frontend and stored it somewhere safely in the backend.
We will need this subscription later to send push messages to the userâ€™s browser.</p>
<p>Make changes to your backend nodejs <strong>index.js</strong> file :</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> cors <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cors'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> bodyParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'body-parser'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">cors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token number">4000</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello World!'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> dummyDb <span class="token operator">=</span> <span class="token punctuation">{</span> subscription<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span> <span class="token comment">//dummy in memory store</span>

<span class="token keyword">const</span> <span class="token function-variable function">saveToDatabase</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token parameter">subscription</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// Since this is a demo app, I am going to save this in a dummy in memory store. Do not do this in your apps.</span>
  <span class="token comment">// Here you should be writing your db logic to save it.</span>
  dummyDb<span class="token punctuation">.</span>subscription <span class="token operator">=</span> subscription
<span class="token punctuation">}</span>

<span class="token comment">// The new /save-subscription endpoint</span>
app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/save-subscription'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> subscription <span class="token operator">=</span> req<span class="token punctuation">.</span>body
  <span class="token keyword">await</span> <span class="token function">saveToDatabase</span><span class="token punctuation">(</span>subscription<span class="token punctuation">)</span> <span class="token comment">//Method to save the subscription to Database</span>
  res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">'success'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Example app listening on port </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div>
<p>Now we have saved the subscription at the backend, next step is to finally send a push message to the frontend.</p>
<h3 id="generate-remote-notification" style="position:relative;"><a href="#generate-remote-notification" aria-label="generate remote notification permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Generate Remote Notification</h3>
<p>To generate a push message we will use a npm library <a href="https://github.com/web-push-libs/web-push#readme" target="_blank"><strong>web-push</strong></a> which will help us encrypt the message, setting the correct parameters, legacy support for browsers etc.
If you need to figure out how to do this in languages other than Javascript(NodeJS), you can take a look at the web-push source code.</p>
<p>In your backend project, install the npm module <strong>web-push</strong> locally.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">npm install --save web-push</code></pre></div>
<p>In the backend <strong>index.js</strong> add the following:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token operator">...</span>
<span class="token operator">...</span>
<span class="token operator">...</span>
<span class="token keyword">const</span> webpush <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'web-push'</span><span class="token punctuation">)</span> <span class="token comment">//requiring the web-push module</span>
<span class="token operator">...</span>
<span class="token operator">...</span>
<span class="token operator">...</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">...</span>
<span class="token operator">...</span>
<span class="token operator">...</span>

<span class="token keyword">const</span> vapidKeys <span class="token operator">=</span> <span class="token punctuation">{</span>
  publicKey<span class="token operator">:</span>
    <span class="token string">'BJ5IxJBWdeqFDJTvrZ4wNRu7UY2XigDXjgiUBYEYVXDudxhEs0ReOJRBcBHsPYgZ5dyV8VjyqzbQKS8V7bUAglk'</span><span class="token punctuation">,</span>
  privateKey<span class="token operator">:</span> <span class="token string">'ERIZmc5T5uWGeRxedxu92k3HnpVwy_RCnQfgek1x2Y4'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">//setting our previously generated VAPID keys</span>
webpush<span class="token punctuation">.</span><span class="token function">setVapidDetails</span><span class="token punctuation">(</span>
  <span class="token string">'mailto:myuserid@email.com'</span><span class="token punctuation">,</span>
  vapidKeys<span class="token punctuation">.</span>publicKey<span class="token punctuation">,</span>
  vapidKeys<span class="token punctuation">.</span>privateKey
<span class="token punctuation">)</span>

<span class="token comment">//function to send the notification to the subscribed device</span>
<span class="token keyword">const</span> sendNotification <span class="token operator">=</span> <span class="token punctuation">(</span>subscription<span class="token punctuation">,</span> dataToSend<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  webpush<span class="token punctuation">.</span><span class="token function">sendNotification</span><span class="token punctuation">(</span>subscription<span class="token punctuation">,</span> dataToSend<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p><strong>Explanation</strong> <br/>
<strong>webpush.setVapidDetails</strong> takes three arguments.</p>
<ul>
<li>First argument needs to be either a URL or a mailto email address.</li>
<li>Second argument is the VAPID public key we generated earlier.</li>
<li>Third argument is the VAPID private key.</li>
</ul>
<p>To test this out lets add another route /<strong>send-notification</strong> to our NodeJS express server. <br/>
The complete backend <strong>index.js</strong> file would look something like this.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> cors <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cors'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> bodyParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'body-parser'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> webpush <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'web-push'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">cors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token number">4000</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello World!'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> dummyDb <span class="token operator">=</span> <span class="token punctuation">{</span> subscription<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span> <span class="token comment">//dummy in memory store</span>

<span class="token keyword">const</span> <span class="token function-variable function">saveToDatabase</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token parameter">subscription</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// Since this is a demo app, I am going to save this in a dummy in memory store. Do not do this in your apps.</span>
  <span class="token comment">// Here you should be writing your db logic to save it.</span>
  dummyDb<span class="token punctuation">.</span>subscription <span class="token operator">=</span> subscription
<span class="token punctuation">}</span>

<span class="token comment">// The new /save-subscription endpoint</span>
app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/save-subscription'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> subscription <span class="token operator">=</span> req<span class="token punctuation">.</span>body
  <span class="token keyword">await</span> <span class="token function">saveToDatabase</span><span class="token punctuation">(</span>subscription<span class="token punctuation">)</span> <span class="token comment">//Method to save the subscription to Database</span>
  res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">'success'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> vapidKeys <span class="token operator">=</span> <span class="token punctuation">{</span>
  publicKey<span class="token operator">:</span>
    <span class="token string">'BJ5IxJBWdeqFDJTvrZ4wNRu7UY2XigDXjgiUBYEYVXDudxhEs0ReOJRBcBHsPYgZ5dyV8VjyqzbQKS8V7bUAglk'</span><span class="token punctuation">,</span>
  privateKey<span class="token operator">:</span> <span class="token string">'ERIZmc5T5uWGeRxedxu92k3HnpVwy_RCnQfgek1x2Y4'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">//setting our previously generated VAPID keys</span>
webpush<span class="token punctuation">.</span><span class="token function">setVapidDetails</span><span class="token punctuation">(</span>
  <span class="token string">'mailto:myuserid@email.com'</span><span class="token punctuation">,</span>
  vapidKeys<span class="token punctuation">.</span>publicKey<span class="token punctuation">,</span>
  vapidKeys<span class="token punctuation">.</span>privateKey
<span class="token punctuation">)</span>

<span class="token comment">//function to send the notification to the subscribed device</span>
<span class="token keyword">const</span> <span class="token function-variable function">sendNotification</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">subscription<span class="token punctuation">,</span> dataToSend</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  webpush<span class="token punctuation">.</span><span class="token function">sendNotification</span><span class="token punctuation">(</span>subscription<span class="token punctuation">,</span> dataToSend<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">//route to test send notification</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/send-notification'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> subscription <span class="token operator">=</span> dummyDb<span class="token punctuation">.</span>subscription <span class="token comment">//get subscription from your databse here.</span>
  <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token string">'Hello World'</span>
  <span class="token function">sendNotification</span><span class="token punctuation">(</span>subscription<span class="token punctuation">,</span> message<span class="token punctuation">)</span>
  res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">'message sent'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Example app listening on port </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div>
<h4 id="lets-try-it-out" style="position:relative;"><a href="#lets-try-it-out" aria-label="lets try it out permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Lets try it out!!</h4>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; max-width:100% !important;"
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 20.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAs0lEQVQY043OzQqCQBiF4fHnCoIWtXI9CtloA0oURFdQihDR32hZVPe/e0OpIFrU4uF8iwPnE/uyZLUrOW73GHPAGENRFGRZRp7nreViyWa75ny/UNcnbuea67W5a6qq+iAc10UI8VO322E2H5MkGpUMGIQBQRAgpcT3/Zb0ZdMVWFbDerNtG8dxWu5z0PM8ppMpaZqSjFNGI00cx1/EP981+v0eWmvCMEQNFUopoih658sD8id3vFmHQMYAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="demo_run"
        title="demo_run"
        src="/static/0351834eb0929f50d5cfcace444ff402/5a190/demo_run.png"
        srcset="/static/0351834eb0929f50d5cfcace444ff402/772e8/demo_run.png 200w,
/static/0351834eb0929f50d5cfcace444ff402/e17e5/demo_run.png 400w,
/static/0351834eb0929f50d5cfcace444ff402/5a190/demo_run.png 800w,
/static/0351834eb0929f50d5cfcace444ff402/c1b63/demo_run.png 1200w,
/static/0351834eb0929f50d5cfcace444ff402/29007/demo_run.png 1600w,
/static/0351834eb0929f50d5cfcace444ff402/e2cbf/demo_run.png 2138w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<p>Lets open up <strong><a href="http://127.0.0.1:8080">http://127.0.0.1:8080</a></strong> in the browser</p>
<p>Make sure you start from clean slate. Unregister service workers, clear up cache, etc.
Now hit <strong>ask permission</strong> and you should see a console message success. Which means our push subscription has been saved in backend.</p>
<p>Now open up the backend route <strong><a href="http://localhost:4000/send-notification">http://localhost:4000/send-notification</a></strong> in another tab in your browser (since it is a GET API). You should see hello world push message on the console of the frontend app.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; max-width:100% !important;"
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 21%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAwUlEQVQY03XJzU6EMABFYd7/5WajiTJ0oC1/LWVKsYVhjD1Gk3Gh8SZfzuIWUmt6O9MZRzs6qqZDyJ6LGlC9Qw/zj3acka3lpZLUskcIRVlrSiE5VwrVWYq6PtE0J7yv2DdNSoqUHpXEqDDGYq3F2JE1eNY14CbDPBl88CzeEfyVZfEU3fCEc8/E+EqM5R8pCZbrhHcDcXW8H2/f7reV+xHJHzfgYN8DYZko9l2wbYKUKmL87UxKF3LO/LevKz+a4ROrai5AcyYw5gAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="demo_run_browsers_console_chrome"
        title="demo_run_browsers_console_chrome"
        src="/static/cbbe853fb53b649d8d6d9f4cbc224e86/5a190/chrome_demo_console.png"
        srcset="/static/cbbe853fb53b649d8d6d9f4cbc224e86/772e8/chrome_demo_console.png 200w,
/static/cbbe853fb53b649d8d6d9f4cbc224e86/e17e5/chrome_demo_console.png 400w,
/static/cbbe853fb53b649d8d6d9f4cbc224e86/5a190/chrome_demo_console.png 800w,
/static/cbbe853fb53b649d8d6d9f4cbc224e86/c1b63/chrome_demo_console.png 1200w,
/static/cbbe853fb53b649d8d6d9f4cbc224e86/29007/chrome_demo_console.png 1600w,
/static/cbbe853fb53b649d8d6d9f4cbc224e86/a2b91/chrome_demo_console.png 3360w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span>
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; max-width:100% !important;"
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 17%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAtElEQVQI113My2rCQACF4bz/i4QSdCaaRLyBuBKkFEEwi2JcqhE0Fx0zk5lfYrsoPYdvcxbHC8OAz80Xp0vOMT+zWC6YzqdMZmOSUUwyit6iJEZGYwbDmF5fIGSIlAP6QuL7H/hBgBQC75CtyfYrbtctT/WNbjK0/uuAMXuUOpMXDffqgTUWa3+1lta0WAdl3eAVxY6yTKnvKXWdUlW7f7pti1JHjLForXHO8a770aU7f+qWF5xY2Oms9MzuAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="demo_run_browsers_console_firefox"
        title="demo_run_browsers_console_firefox"
        src="/static/0bfaa27c0003f1e7d0aadc9e694bd1b6/5a190/demo_run_browsers_console_firefox.png"
        srcset="/static/0bfaa27c0003f1e7d0aadc9e694bd1b6/772e8/demo_run_browsers_console_firefox.png 200w,
/static/0bfaa27c0003f1e7d0aadc9e694bd1b6/e17e5/demo_run_browsers_console_firefox.png 400w,
/static/0bfaa27c0003f1e7d0aadc9e694bd1b6/5a190/demo_run_browsers_console_firefox.png 800w,
/static/0bfaa27c0003f1e7d0aadc9e694bd1b6/c1b63/demo_run_browsers_console_firefox.png 1200w,
/static/0bfaa27c0003f1e7d0aadc9e694bd1b6/29007/demo_run_browsers_console_firefox.png 1600w,
/static/0bfaa27c0003f1e7d0aadc9e694bd1b6/02b44/demo_run_browsers_console_firefox.png 3358w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<h3 id="adding-final-touches-show-push-messages-as-a-notification" style="position:relative;"><a href="#adding-final-touches-show-push-messages-as-a-notification" aria-label="adding final touches show push messages as a notification permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding final touches: Show push messages as a notification</h3>
<p>Open up your frontend <strong>service.js</strong> and add the following:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token operator">...</span>
<span class="token operator">...</span>
<span class="token operator">...</span>
self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"push"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Push event!! "</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">showLocalNotification</span><span class="token punctuation">(</span><span class="token string">"Yolo"</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>registration<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Push event but no data"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">showLocalNotification</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">title<span class="token punctuation">,</span> body<span class="token punctuation">,</span> swRegistration</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
    body
    <span class="token comment">// here you can add more properties like icon, image, vibrate, etc.</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  swRegistration<span class="token punctuation">.</span><span class="token function">showNotification</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>The final <strong>service.js</strong> file looks like this:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// urlB64ToUint8Array is a magic function that will encode the base64 public key</span>
<span class="token comment">// to Array buffer which is needed by the subscription option</span>
<span class="token keyword">const</span> <span class="token function-variable function">urlB64ToUint8Array</span> <span class="token operator">=</span> <span class="token parameter">base64String</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> padding <span class="token operator">=</span> <span class="token string">'='</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">-</span> <span class="token punctuation">(</span>base64String<span class="token punctuation">.</span>length <span class="token operator">%</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">4</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> base64 <span class="token operator">=</span> <span class="token punctuation">(</span>base64String <span class="token operator">+</span> padding<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\-</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'+'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">_</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'/'</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> rawData <span class="token operator">=</span> <span class="token function">atob</span><span class="token punctuation">(</span>base64<span class="token punctuation">)</span>
  <span class="token keyword">const</span> outputArray <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>rawData<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> rawData<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    outputArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> rawData<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> outputArray
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">saveSubscription</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token parameter">subscription</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token constant">SERVER_URL</span> <span class="token operator">=</span> <span class="token string">'http://localhost:4000/save-subscription'</span>
  <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token constant">SERVER_URL</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    method<span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
    headers<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    body<span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>subscription<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'activate'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// This will be called only once when the service worker is installed for first time.</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> applicationServerKey <span class="token operator">=</span> <span class="token function">urlB64ToUint8Array</span><span class="token punctuation">(</span>
      <span class="token string">'BJ5IxJBWdeqFDJTvrZ4wNRu7UY2XigDXjgiUBYEYVXDudxhEs0ReOJRBcBHsPYgZ5dyV8VjyqzbQKS8V7bUAglk'</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span> applicationServerKey<span class="token punctuation">,</span> userVisibleOnly<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
    <span class="token keyword">const</span> subscription <span class="token operator">=</span> <span class="token keyword">await</span> self<span class="token punctuation">.</span>registration<span class="token punctuation">.</span>pushManager<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">saveSubscription</span><span class="token punctuation">(</span>subscription<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Error'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'push'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Push event!! '</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token function">showLocalNotification</span><span class="token punctuation">(</span><span class="token string">'Yolo'</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>registration<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Push event but no data'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">showLocalNotification</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">title<span class="token punctuation">,</span> body<span class="token punctuation">,</span> swRegistration</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
    body<span class="token punctuation">,</span>
    <span class="token comment">// here you can add more properties like icon, image, vibrate, etc.</span>
  <span class="token punctuation">}</span>
  swRegistration<span class="token punctuation">.</span><span class="token function">showNotification</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Now lets run it one last time. Again, unregister everything, clean up cache and re open the browser tab.
Do the same procedure as before.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; max-width:100% !important;"
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 15.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAArUlEQVQI1z3H23KCMAAAUf7/53yphRYs5MYlCQY0ARXa7eh0+nBmdjOhFK0dMYNHd56iki9VY5CtR3XjP92NCG0pKkGjevK85D0vKL8kp1oidU9W1wea5kAIFcuiiFG8pCRJ6dkSO2jsYHCuZ54c8+RxtmVoBc4awtkyBcfoezLTveH9kRg/iPGTlJ5KYiz//kS8BtLlzOOe+N5v7NvK9ljYtxv8bMDOukYuc+AXMe3gSLhtGGYAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="chrome_demo_notif"
        title="chrome_demo_notif"
        src="/static/fc1dd0afc6d2d32d9fc332bb7915ef31/5a190/chrome_demo_notification.png"
        srcset="/static/fc1dd0afc6d2d32d9fc332bb7915ef31/772e8/chrome_demo_notification.png 200w,
/static/fc1dd0afc6d2d32d9fc332bb7915ef31/e17e5/chrome_demo_notification.png 400w,
/static/fc1dd0afc6d2d32d9fc332bb7915ef31/5a190/chrome_demo_notification.png 800w,
/static/fc1dd0afc6d2d32d9fc332bb7915ef31/c1b63/chrome_demo_notification.png 1200w,
/static/fc1dd0afc6d2d32d9fc332bb7915ef31/29007/chrome_demo_notification.png 1600w,
/static/fc1dd0afc6d2d32d9fc332bb7915ef31/a2b91/chrome_demo_notification.png 3360w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span>
<br/>
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; max-width:100% !important;"
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 18.999999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA0UlEQVQY03WMzU7CQBhF+/47oxDSIFjFREFBg2/gjoULF4CmLdEEg0l/mOk3w5SaHiNGN+JJTu7d3OvdTx54XeUslgmD0Zjg/JKgd8HxyRntbkC7e7pLv/PdG80WB4cNjpotOr5Pvz/ganjD7fiO6+EIL4om5Okct3nByAIpYkRiCh2hdbiz0DHLVcrbe0aeZiilWCuFThPyLENEcK4kzdZ4SfKILqaIzDBmvscZ1oZsnMPYLR+uYh9lWaFNhWftM8Y8IfKfX6chUP+O67r+4w+fkV4hmNad48YAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="firefox_demo_notif"
        title="firefox_demo_notif"
        src="/static/e30f5dfd83e5987b339882755d49d927/5a190/firefox_demo_notif.png"
        srcset="/static/e30f5dfd83e5987b339882755d49d927/772e8/firefox_demo_notif.png 200w,
/static/e30f5dfd83e5987b339882755d49d927/e17e5/firefox_demo_notif.png 400w,
/static/e30f5dfd83e5987b339882755d49d927/5a190/firefox_demo_notif.png 800w,
/static/e30f5dfd83e5987b339882755d49d927/c1b63/firefox_demo_notif.png 1200w,
/static/e30f5dfd83e5987b339882755d49d927/29007/firefox_demo_notif.png 1600w,
/static/e30f5dfd83e5987b339882755d49d927/a2b91/firefox_demo_notif.png 3360w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<br/>
<br/>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; max-width:100% !important;"
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 28.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAARlAAAEZQAGA43XUAAABkUlEQVQY02NgYGBgWLEkjwEGNq4uOrp/R83/Y3tr/6xe2vh/xtSW//OmtP/vbaz6H+Fu9d9cif13vLvs/0hHyR2lEVoMhaEaTJ7GfAwoYPP6Ujh7z/aqo6ePtv6/cLL9z8G9Df8nlfj+X5rr/X92qvP/HDv5/1byXL/jXWX+x7lK76iM0WMoDtNm8jbjRzVw56ZyOHv/TpCBLf9vXZv05+bFnv87Slz/zwrU/t/nr/7fRZ77vwAz8+9wW6n/CW4yO9rSDBmKw7WZfEzQDDx8sAXOPnu65+idm9P+Hz3U8mdGb/T/yaGG/+eHG/yfFarzP1RN4L8ML9vvKEfp/0kesjvaMowZqmL0mHxM0Qy89Xwbw////8H41NVlR+ua4/8bGUr/0VDg/98foPe/1Vf9f5aV+H8Tca7/Irxsv610hP+7GIns8DCTZnAykmKy10MLw+tPdsENTEz3Piojx/NfWZH/j4oi3/9UH/3/KbYy/8Os5P8L8rH919aU/G2mr/hfV01qh5G2IoOZvgqTlrII3DAA0yesTgRlrKcAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="meme_its_magic"
        title="meme_its_magic"
        src="/static/2564d1bec1b1124d50c827a2da29ad55/5a190/meme_its_magic.png"
        srcset="/static/2564d1bec1b1124d50c827a2da29ad55/772e8/meme_its_magic.png 200w,
/static/2564d1bec1b1124d50c827a2da29ad55/e17e5/meme_its_magic.png 400w,
/static/2564d1bec1b1124d50c827a2da29ad55/5a190/meme_its_magic.png 800w,
/static/2564d1bec1b1124d50c827a2da29ad55/c1b63/meme_its_magic.png 1200w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<br/>
Wohoo !! ðŸš€ Now you can create web apps that can spam people too ðŸ¤£
<h2 id="caveats" style="position:relative;"><a href="#caveats" aria-label="caveats permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Caveats</h2>
<ul>
<li>Great article by <a href="https://github.com/Rich-Harris" target="_blank">Rich Harris</a>: <i>Stuff I wish Iâ€™d known sooner about service workers </i><br/><a href="https://gist.github.com/Rich-Harris/fd6c3c73e6e707e312d7c5d7d0f3b2f9" target="_blank"><a href="https://gist.github.com/Rich-Harris/fd6c3c73e6e707e312d7c5d7d0f3b2f9">https://gist.github.com/Rich-Harris/fd6c3c73e6e707e312d7c5d7d0f3b2f9</a></a></li>
</ul>
<h2 id="references" style="position:relative;"><a href="#references" aria-label="references permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>References</h2>
<ul>
<li><a href="https://developers.google.com/web/fundamentals/codelabs/push-notifications/">https://developers.google.com/web/fundamentals/codelabs/push-notifications/</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Push_API">https://developer.mozilla.org/en-US/docs/Web/API/Push_API</a></li>
<li><a href="https://developers.google.com/web/fundamentals/primers/service-workers/">https://developers.google.com/web/fundamentals/primers/service-workers/</a></li>
<li><a href="https://blog.sessionstack.com/how-javascript-works-the-mechanics-of-web-push-notifications-290176c5c55d">https://blog.sessionstack.com/how-javascript-works-the-mechanics-of-web-push-notifications-290176c5c55d</a></li>
<li><a href="https://developers.google.com/web/fundamentals/primers/service-workers/">https://developers.google.com/web/fundamentals/primers/service-workers/</a></li>
<li><a href="https://developers.google.com/web/fundamentals/codelabs/debugging-service-workers/">https://developers.google.com/web/fundamentals/codelabs/debugging-service-workers/</a></li>
<li><a href="https://developers.google.com/web/fundamentals/push-notifications/permission-ux">https://developers.google.com/web/fundamentals/push-notifications/permission-ux</a></li>
<li><a href="https://developers.google.com/web/fundamentals/push-notifications/how-push-works">https://developers.google.com/web/fundamentals/push-notifications/how-push-works</a></li>
<li><a href="https://gist.github.com/Rich-Harris/fd6c3c73e6e707e312d7c5d7d0f3b2f9">https://gist.github.com/Rich-Harris/fd6c3c73e6e707e312d7c5d7d0f3b2f9</a></li>
</ul>
<p>The entire code for this blog is available at <a href="https://github.com/a7ul/web-push-demo" target="_blank"><a href="https://github.com/a7ul/web-push-demo">https://github.com/a7ul/web-push-demo</a></a></p></article></section><aside class="right-side-area"><div class="side-area-wrapper"><p style="text-align:center"><strong>Like what you read? â¤</strong><br/></p><aside style="display:flex;flex-direction:column;align-items:center;justify-content:center;padding-bottom:1.625rem"><div style="display:inline-block;position:relative;text-align:center"><a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet/?text=ðŸš€ðŸ”” Beginners guide to Web Push Notifications using Service Workers&amp;amp;url=https://blog.atulr.comweb-notifications" target="_blank" rel="noopener noreferrer" aria-label=""><div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z"></path></svg></div></div></a><a class="resp-sharing-button__link" href="https://news.ycombinator.com/submitlink?u=https://blog.atulr.comweb-notifications&amp;t=ðŸš€ðŸ”” Beginners guide to Web Push Notifications using Service Workers" target="_blank" rel="noopener noreferrer" aria-label=""><div class="resp-sharing-button resp-sharing-button--hackernews resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 140 140"><path fill-rule="evenodd" d="M60.94 82.314L17 0h20.08l25.85 52.093c.397.927.86 1.888 1.39 2.883.53.994.995 2.02 1.393 3.08.265.4.463.764.596 1.095.13.334.262.63.395.898.662 1.325 1.26 2.618 1.79 3.877.53 1.26.993 2.42 1.39 3.48 1.06-2.254 2.22-4.673 3.48-7.258 1.26-2.585 2.552-5.27 3.877-8.052L103.49 0h18.69L77.84 83.308v53.087h-16.9v-54.08z"></path></svg></div></div></a></div><div style="text-align:center;display:inline-box;font-size:small;font-weight:bold;color:#007acc">Share this post</div></aside><a href="https://revolut.me/atul" target="_blank" rel="noopener noreferrer" style="display:flex;justify-content:center;flex-direction:column;align-items:center"><img class="coffee" src="/static/coffee-e208eb2ebad601320fbcf3302080dc8f.svg" alt="coffee"/><div style="text-align:center;font-size:small;font-weight:bold;margin-top:-0.8125rem">Buy me coffee </div></a></div></aside></main><footer class="page-spacing"><div id="disqus_thread"></div><section style="display:flex;flex-direction:row;padding-top:0.54167rem"><img src="https://avatars2.githubusercontent.com/u/4029423?s=200" alt="Atul R" style="width:3.25rem;height:3.25rem;margin-right:1.625rem"/><p style="text-align:justify">Written by<strong> <a href="https://www.atulr.com" target="_blank" rel="noopener noreferrer">Atul R</a></strong> <!-- -->a developer ðŸ–¥,<!-- --> <a href="https://www.reactnative.guide" target="_blank" rel="noopener noreferrer">author</a> <!-- -->ðŸ“– and trainer ðŸ‘¨ðŸ½â€ðŸŽ“. He primarily works on Javascript ecosystem and occasionally hacks around in C++, Rust and Python. He is an<!-- --> <a href="https://github.com/a7ul" target="_blank" rel="noopener noreferrer">open source</a> <!-- -->enthusiast and <span style="color:red">â¤</span> making useful tools for humans.<!-- --> <a href="https://twitter.com/a7ulr" target="_blank" rel="noopener noreferrer">You should follow him on Twitter<!-- --> </a></p></section></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-65870043-2', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/web-notifications/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-cdaf4ea98d112952f788.js"],"app":["/app-385c1031323534e3d9be.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-3d8379729da032239eb0.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-3c28046edd9aa18610ca.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-88b76a4cd38a717234ca.js"],"component---src-pages-markdown-remark-frontmatter-slug-tsx":["/component---src-pages-markdown-remark-frontmatter-slug-tsx-fa129a45e5c9df4ab1f7.js"]};/*]]>*/</script><script src="/polyfill-cdaf4ea98d112952f788.js" nomodule=""></script><script src="/component---src-pages-markdown-remark-frontmatter-slug-tsx-fa129a45e5c9df4ab1f7.js" async=""></script><script src="/a11e6048128043ecce21cf58c6d16eea726089af-705f5c0b38d098cc0302.js" async=""></script><script src="/app-385c1031323534e3d9be.js" async=""></script><script src="/framework-7579de6891c526166fb8.js" async=""></script><script src="/webpack-runtime-3f5aba560311897579d7.js" async=""></script></body></html>